(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[39],{10380(e,t,n){var r=n(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyState=void 0;var o=r(n(25602)),a=n(71582),s=n(46586),l=n(56045),i=this,u="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\components\\ui\\EmptyState.tsx",c=(t.EmptyState=function(e){var t=e.icon,n=e.title,r=e.description,s=e.primaryActionLabel,m=e.onPrimaryAction,d=e.primaryVariant,f=void 0===d?"primary":d,p=e.style,_=e.testID;return o.default.createElement(a.View,{style:[c.container,p],testID:_,__self:i,__source:{fileName:u,lineNumber:28,columnNumber:5}},t&&o.default.createElement(a.Text,{style:c.icon,__self:i,__source:{fileName:u,lineNumber:29,columnNumber:16}},t),o.default.createElement(a.Text,{style:c.title,__self:i,__source:{fileName:u,lineNumber:30,columnNumber:7}},n),r&&o.default.createElement(a.Text,{style:c.description,__self:i,__source:{fileName:u,lineNumber:31,columnNumber:23}},r),s&&m&&o.default.createElement(a.View,{style:c.actionContainer,__self:i,__source:{fileName:u,lineNumber:33,columnNumber:9}},o.default.createElement(l.LinearButton,{title:s,onPress:m,variant:f,__self:i,__source:{fileName:u,lineNumber:34,columnNumber:11}})))},a.StyleSheet.create({container:{alignItems:"center",justifyContent:"center",padding:s.Tokens.spacing[8]},icon:{fontFamily:s.Tokens.type.fontFamily.sans,fontSize:s.Tokens.type["5xl"],marginBottom:s.Tokens.spacing[4],textAlign:"center"},title:{fontFamily:s.Tokens.type.fontFamily.mono,color:s.Tokens.colors.text.secondary,fontSize:s.Tokens.type.sm,letterSpacing:2,textAlign:"center",textTransform:"uppercase"},description:{fontFamily:s.Tokens.type.fontFamily.mono,color:s.Tokens.colors.text.tertiary,fontSize:s.Tokens.type.xs,textAlign:"center",marginTop:s.Tokens.spacing[2],maxWidth:300},actionContainer:{marginTop:s.Tokens.spacing[6]}}))},30039(e,t,n){var r=n(18772),o=n(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(16578)),s=r(n(51750)),l=r(n(3791)),i=r(n(26007)),u=r(n(58361)),c=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(r.get||r.set)?n(a,s,r):a[s]=e[s]);return a}(e)}(n(25602)),m=n(71582),d=r(n(40629)),f=r(n(93400)),p=r(n(46414)),_=n(15547),y=n(42745),g=n(56045),T=n(10380),b=n(46586),k=n(2865),N=this,x="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\FogCutterScreen.tsx";function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=m.StyleSheet.create({container:{flex:1,backgroundColor:b.Tokens.colors.neutral.darkest},scrollContent:{flex:1,alignItems:"center"},content:{flex:1,width:"100%",maxWidth:b.Tokens.layout.maxWidth.prose,padding:b.Tokens.spacing[4]},header:{marginBottom:b.Tokens.spacing[6],flexDirection:"row",alignItems:"center",width:"100%",paddingBottom:b.Tokens.spacing[2],justifyContent:"space-between"},title:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.lg,fontWeight:"700",color:b.Tokens.colors.text.primary,letterSpacing:1,textTransform:"uppercase"},headerLine:{flex:1,height:1,backgroundColor:b.Tokens.colors.neutral.dark,marginLeft:b.Tokens.spacing[4]},creationCard:{marginBottom:b.Tokens.spacing[6],backgroundColor:b.Tokens.colors.neutral.darkest,padding:b.Tokens.spacing[4],borderRadius:b.Tokens.radii.none,borderWidth:1,borderColor:b.Tokens.colors.neutral.border},creationHeader:{marginBottom:b.Tokens.spacing[4]},cardTitle:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,fontWeight:"700",color:b.Tokens.colors.text.secondary,letterSpacing:1,textTransform:"uppercase"},input:E({backgroundColor:b.Tokens.colors.neutral.darker,borderRadius:b.Tokens.radii.none,paddingHorizontal:b.Tokens.spacing[3],color:b.Tokens.colors.text.primary,fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.sm,marginBottom:b.Tokens.spacing[3],height:48,borderWidth:1,borderColor:b.Tokens.colors.neutral.border},m.Platform.select({web:{outlineStyle:"none",transition:"border-color 0.2s ease"}})),inputFocused:{borderColor:b.Tokens.colors.brand[500],backgroundColor:b.Tokens.colors.neutral.darkest},addStepRow:{flexDirection:"row",marginBottom:b.Tokens.spacing[3],gap:b.Tokens.spacing[2]},stepInput:E({flex:1,backgroundColor:b.Tokens.colors.neutral.darker,borderRadius:b.Tokens.radii.none,paddingHorizontal:b.Tokens.spacing[3],color:b.Tokens.colors.text.primary,fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.sm,height:48,borderWidth:1,borderColor:b.Tokens.colors.neutral.border},m.Platform.select({web:{outlineStyle:"none",transition:"border-color 0.2s ease"}})),addButton:{width:48,height:48,paddingHorizontal:0,justifyContent:"center",alignItems:"center",borderRadius:b.Tokens.radii.none},previewContainer:{backgroundColor:b.Tokens.colors.neutral.darkest,borderRadius:b.Tokens.radii.none,padding:b.Tokens.spacing[4],marginBottom:b.Tokens.spacing[3],borderWidth:1,borderStyle:"dashed",borderColor:b.Tokens.colors.neutral.border},previewTitle:{fontFamily:b.Tokens.type.fontFamily.mono,color:b.Tokens.colors.text.tertiary,fontSize:b.Tokens.type.xxs,fontWeight:"700",marginBottom:b.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:1},microStep:{flexDirection:"row",alignItems:"center",paddingVertical:2},stepNumber:{color:b.Tokens.colors.text.tertiary,width:b.Tokens.spacing[6],fontSize:b.Tokens.type.xs,fontWeight:"bold",marginRight:b.Tokens.spacing[2],fontFamily:b.Tokens.type.fontFamily.mono},stepText:{fontFamily:b.Tokens.type.fontFamily.mono,color:b.Tokens.colors.text.secondary,fontSize:b.Tokens.type.sm},saveButton:{marginTop:b.Tokens.spacing[2]},divider:{height:1,backgroundColor:b.Tokens.colors.neutral.border,width:"100%",marginBottom:b.Tokens.spacing[6]},sectionHeader:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,fontWeight:"700",color:b.Tokens.colors.text.tertiary,textTransform:"uppercase",letterSpacing:1,marginBottom:b.Tokens.spacing[3]},taskList:{flex:1},listContent:{paddingBottom:b.Tokens.spacing[20]},taskCard:E({backgroundColor:b.Tokens.colors.neutral.darkest,borderRadius:b.Tokens.radii.none,padding:b.Tokens.spacing[4],marginBottom:-1,borderWidth:1,borderColor:b.Tokens.colors.neutral.border,minHeight:64,justifyContent:"center"},m.Platform.select({web:{transition:"all 0.2s ease",cursor:"pointer"}})),taskCardHovered:{borderColor:b.Tokens.colors.brand[500],zIndex:1},taskCardPressed:{backgroundColor:b.Tokens.colors.neutral.darker},taskCardCompleted:{opacity:.5,backgroundColor:b.Tokens.colors.neutral.darker},taskHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:b.Tokens.spacing[1]},taskText:{fontFamily:b.Tokens.type.fontFamily.sans,color:b.Tokens.colors.text.primary,fontSize:b.Tokens.type.base,fontWeight:"700",flex:1,marginRight:b.Tokens.spacing[2]},completed:{textDecorationLine:"line-through",color:b.Tokens.colors.text.secondary},doneBadge:{backgroundColor:b.Tokens.colors.neutral.dark,color:b.Tokens.colors.text.secondary,fontSize:b.Tokens.type.xxs,fontWeight:"700",paddingHorizontal:6,paddingVertical:2,borderRadius:b.Tokens.radii.none,overflow:"hidden",fontFamily:b.Tokens.type.fontFamily.mono},activeStepContainer:{marginTop:b.Tokens.spacing[2],paddingLeft:b.Tokens.spacing[2],borderLeftWidth:1,borderLeftColor:b.Tokens.colors.brand[500]},activeStepLabel:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xxs,color:b.Tokens.colors.text.tertiary,marginBottom:1,letterSpacing:.5},activeStepText:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,color:b.Tokens.colors.text.secondary},stepCountText:{fontFamily:b.Tokens.type.fontFamily.mono,color:b.Tokens.colors.text.tertiary,fontSize:b.Tokens.type.xs,letterSpacing:1},loadingContainer:{padding:b.Tokens.spacing[8],alignItems:"center",gap:b.Tokens.spacing[4]},loadingText:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,color:b.Tokens.colors.text.secondary,letterSpacing:1,textTransform:"uppercase"},emptyState:{marginTop:b.Tokens.spacing[8],opacity:.5},guideBanner:{backgroundColor:b.Tokens.colors.neutral.dark,borderWidth:1,borderColor:b.Tokens.colors.brand[500],padding:b.Tokens.spacing[3],marginBottom:b.Tokens.spacing[6],flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:b.Tokens.spacing[4]},guideContent:{flex:1},guideTitle:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,fontWeight:"700",color:b.Tokens.colors.brand[500],marginBottom:b.Tokens.spacing[1],letterSpacing:1},guideText:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,color:b.Tokens.colors.text.primary},guideButton:{paddingVertical:4,paddingHorizontal:8,borderWidth:1,borderColor:b.Tokens.colors.neutral.border,backgroundColor:b.Tokens.colors.neutral.darkest},guideButtonPressed:{backgroundColor:b.Tokens.colors.neutral.darker},guideButtonText:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xxs,fontWeight:"700",color:b.Tokens.colors.text.primary,textTransform:"uppercase"}});t.default=function(e){var t=e.navigation,n=(0,c.useState)(""),r=(0,u.default)(n,2),o=r[0],l=r[1],S=(0,c.useState)([]),h=(0,u.default)(S,2),C=h[0],O=h[1],w=(0,c.useState)(""),P=(0,u.default)(w,2),F=P[0],I=P[1],A=(0,c.useState)([]),B=(0,u.default)(A,2),j=B[0],D=B[1],z=(0,c.useState)(null),L=(0,u.default)(z,2),R=L[0],V=L[1],W=(0,c.useState)(!0),M=(0,u.default)(W,2),H=M[0],G=M[1],U=(0,c.useState)(!1),K=(0,u.default)(U,2),Y=K[0],J=K[1],q=(0,c.useState)(!0),X=(0,u.default)(q,2),Q=X[0],Z=X[1],$=(0,c.useState)(null),ee=(0,u.default)($,2),te=ee[0],ne=ee[1],re=(0,c.useRef)(null);(0,c.useEffect)(function(){"android"===m.Platform.OS&&m.UIManager.setLayoutAnimationEnabledExperimental&&m.UIManager.setLayoutAnimationEnabledExperimental(!0);var e,t=(e=(0,i.default)(a.default.mark(function e(){var t,n,r,o,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([d.default.getJSON(d.default.STORAGE_KEYS.tasks),d.default.getJSON(d.default.STORAGE_KEYS.firstSuccessGuideState)]);case 1:t=e.sent,n=(0,u.default)(t,2),r=n[0],o=n[1],Z(!!o&&!!o.fogCutterDismissed),r&&Array.isArray(r)&&(s=r.filter(function(e){return Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.text)&&Array.isArray(null==e?void 0:e.microSteps))}).map(function(e){return E(E({},e),{},{microSteps:(0,y.normalizeMicroSteps)(e.microSteps)})}),D(s)),e.next=3;break;case 2:e.prev=2,l=e.catch(0),console.error("Failed to load tasks",l);case 3:return e.prev=3,G(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),function(){return e.apply(this,arguments)});t()},[]),(0,c.useEffect)(function(){d.default.setJSON(d.default.STORAGE_KEYS.tasks,j)},[j]);var oe,ae=function(){F.trim()&&(O([].concat((0,s.default)(C),[F.trim()])),I(""))},se=(oe=(0,i.default)(a.default.mark(function e(){var n,r,o,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.LayoutAnimation.configureNext(m.LayoutAnimation.Presets.easeInEaseOut),J(!1),Z(!0),e.next=1,d.default.getJSON(d.default.STORAGE_KEYS.firstSuccessGuideState);case 1:if(s=n=e.sent,!(o=null!==s)){e.next=2;break}o=void 0!==n;case 2:if(!o){e.next=3;break}l=n,e.next=4;break;case 3:l={};case 4:return r=l,e.next=5,d.default.setJSON(d.default.STORAGE_KEYS.firstSuccessGuideState,E(E({},r),{},{fogCutterDismissed:!0}));case 5:return e.next=6,p.default.requestPendingStart({source:"fogcutter_handoff",requestedAt:(new Date).toISOString(),context:{taskId:null!=te?te:void 0,reason:"user_completed_fog_cutter_decomposition"}});case 6:null==t||t.navigate(k.ROUTES.FOCUS);case 7:case"end":return e.stop()}},e)})),function(){return oe.apply(this,arguments)});return c.default.createElement(m.SafeAreaView,{style:v.container,__self:N,__source:{fileName:x,lineNumber:184,columnNumber:5}},c.default.createElement(m.View,{style:v.scrollContent,__self:N,__source:{fileName:x,lineNumber:185,columnNumber:7}},c.default.createElement(m.View,{style:v.content,__self:N,__source:{fileName:x,lineNumber:186,columnNumber:9}},c.default.createElement(m.View,{style:v.header,__self:N,__source:{fileName:x,lineNumber:187,columnNumber:11}},c.default.createElement(m.Text,{style:v.title,__self:N,__source:{fileName:x,lineNumber:188,columnNumber:13}},"FOG_CUTTER"),c.default.createElement(m.View,{style:v.headerLine,__self:N,__source:{fileName:x,lineNumber:189,columnNumber:13}})),c.default.createElement(m.View,{style:v.creationCard,__self:N,__source:{fileName:x,lineNumber:192,columnNumber:11}},c.default.createElement(m.View,{style:v.creationHeader,__self:N,__source:{fileName:x,lineNumber:193,columnNumber:13}},c.default.createElement(m.Text,{style:v.cardTitle,__self:N,__source:{fileName:x,lineNumber:194,columnNumber:15}},"DECOMPOSE_TASK")),c.default.createElement(m.TextInput,{ref:re,style:[v.input,"main"===R&&v.inputFocused],placeholder:"> INPUT_OVERWHELMING_TASK",placeholderTextColor:b.Tokens.colors.text.placeholder,value:o,onChangeText:l,onFocus:function(){return V("main")},onBlur:function(){return V(null)},__self:N,__source:{fileName:x,lineNumber:196,columnNumber:13}}),c.default.createElement(m.View,{style:v.addStepRow,__self:N,__source:{fileName:x,lineNumber:210,columnNumber:13}},c.default.createElement(m.TextInput,{style:[v.stepInput,"step"===R&&v.inputFocused],placeholder:"> ADD_MICRO_STEP",placeholderTextColor:b.Tokens.colors.text.placeholder,value:F,onChangeText:I,onSubmitEditing:ae,onFocus:function(){return V("step")},onBlur:function(){return V(null)},__self:N,__source:{fileName:x,lineNumber:211,columnNumber:15}}),c.default.createElement(g.LinearButton,{title:"+",onPress:ae,variant:"secondary",style:v.addButton,__self:N,__source:{fileName:x,lineNumber:224,columnNumber:15}})),C.length>0&&c.default.createElement(m.View,{style:v.previewContainer,__self:N,__source:{fileName:x,lineNumber:233,columnNumber:15}},c.default.createElement(m.Text,{style:v.previewTitle,__self:N,__source:{fileName:x,lineNumber:234,columnNumber:17}},"SEQUENCE:"),c.default.createElement(m.FlatList,{data:C,renderItem:function(e){var t=e.item,n=e.index;return c.default.createElement(m.View,{style:v.microStep,__self:N,__source:{fileName:x,lineNumber:175,columnNumber:5}},c.default.createElement(m.Text,{style:v.stepNumber,__self:N,__source:{fileName:x,lineNumber:176,columnNumber:7}},(n+1).toString().padStart(2,"0")),c.default.createElement(m.Text,{style:v.stepText,__self:N,__source:{fileName:x,lineNumber:179,columnNumber:7}},t))},keyExtractor:function(e,t){return t.toString()},scrollEnabled:!1,__self:N,__source:{fileName:x,lineNumber:235,columnNumber:17}})),c.default.createElement(g.LinearButton,{title:"EXECUTE_SAVE",onPress:function(){if(o.trim()&&C.length>0){var e=(0,y.normalizeMicroSteps)(C),t={id:(0,_.generateId)(),text:o,completed:!1,microSteps:e};D(function(e){return[].concat((0,s.default)(e),[t])}),ne(t.id),Q||Y||(f.default.track("fog_cutter_first_task_saved"),m.LayoutAnimation.configureNext(m.LayoutAnimation.Presets.easeInEaseOut),J(!0)),l(""),O([])}},disabled:0===C.length,size:"lg",style:v.saveButton,__self:N,__source:{fileName:x,lineNumber:244,columnNumber:13}})),c.default.createElement(m.View,{style:v.divider,__self:N,__source:{fileName:x,lineNumber:253,columnNumber:11}}),Y&&c.default.createElement(m.View,{style:v.guideBanner,__self:N,__source:{fileName:x,lineNumber:256,columnNumber:13}},c.default.createElement(m.View,{style:v.guideContent,__self:N,__source:{fileName:x,lineNumber:257,columnNumber:15}},c.default.createElement(m.Text,{style:v.guideTitle,__self:N,__source:{fileName:x,lineNumber:258,columnNumber:17}},"CLARITY_ACHIEVED"),c.default.createElement(m.Text,{style:v.guideText,__self:N,__source:{fileName:x,lineNumber:259,columnNumber:17}},"READY. INITIATE_IGNITE_PROTOCOL.")),c.default.createElement(m.Pressable,{onPress:se,style:function(e){var t=e.pressed;return[v.guideButton,t&&v.guideButtonPressed]},accessibilityRole:"button",accessibilityLabel:"Dismiss guidance",__self:N,__source:{fileName:x,lineNumber:263,columnNumber:15}},c.default.createElement(m.Text,{style:v.guideButtonText,__self:N,__source:{fileName:x,lineNumber:272,columnNumber:17}},"ACK"))),c.default.createElement(m.Text,{style:v.sectionHeader,__self:N,__source:{fileName:x,lineNumber:277,columnNumber:11}},"ACTIVE_OPERATIONS"),H?c.default.createElement(m.View,{style:v.loadingContainer,__self:N,__source:{fileName:x,lineNumber:280,columnNumber:13}},c.default.createElement(m.ActivityIndicator,{size:"small",color:b.Tokens.colors.text.primary,__self:N,__source:{fileName:x,lineNumber:281,columnNumber:15}}),c.default.createElement(m.Text,{style:v.loadingText,__self:N,__source:{fileName:x,lineNumber:285,columnNumber:15}},"LOADING...")):c.default.createElement(m.FlatList,{data:j,keyExtractor:function(e){return e.id},contentContainerStyle:v.listContent,renderItem:function(e){var t=e.item;return c.default.createElement(m.Pressable,{style:function(e){var n=e.pressed,r=e.hovered;return[v.taskCard,t.completed&&v.taskCardCompleted,r&&!t.completed&&v.taskCardHovered,n&&!t.completed&&v.taskCardPressed]},onPress:function(){return e=t.id,void D(function(t){return t.map(function(t){return t.id===e?(0,y.advanceTaskProgress)(t):t})});var e},__self:N,__source:{fileName:x,lineNumber:293,columnNumber:17}},c.default.createElement(m.View,{style:v.taskHeader,__self:N,__source:{fileName:x,lineNumber:308,columnNumber:19}},c.default.createElement(m.Text,{style:[v.taskText,t.completed&&v.completed],__self:N,__source:{fileName:x,lineNumber:309,columnNumber:21}},t.text),t.completed?c.default.createElement(m.Text,{style:v.doneBadge,__self:N,__source:{fileName:x,lineNumber:318,columnNumber:23}},"CMPLTD"):c.default.createElement(m.Text,{style:v.stepCountText,__self:N,__source:{fileName:x,lineNumber:320,columnNumber:23}},(0,y.getTaskProgressSummary)(t.microSteps))),!t.completed&&c.default.createElement(m.View,{style:v.activeStepContainer,__self:N,__source:{fileName:x,lineNumber:327,columnNumber:21}},c.default.createElement(m.Text,{style:v.activeStepLabel,__self:N,__source:{fileName:x,lineNumber:328,columnNumber:23}},t.microSteps.find(function(e){return"in_progress"===e.status})?"CURRENT_STEP >>":"NEXT_STEP >>"),c.default.createElement(m.Text,{style:v.activeStepText,numberOfLines:1,__self:N,__source:{fileName:x,lineNumber:333,columnNumber:23}},(t.microSteps.find(function(e){return"in_progress"===e.status})||t.microSteps.find(function(e){return"next"===e.status})||{text:"..."}).text)))},style:v.taskList,ListEmptyComponent:c.default.createElement(T.EmptyState,{icon:"⛰️",title:"NO_ACTIVE_TASKS.",primaryActionLabel:"CREATE FIRST TASK",onPrimaryAction:function(){var e;return null===(e=re.current)||void 0===e?void 0:e.focus()},primaryVariant:"secondary",style:v.emptyState,__self:N,__source:{fileName:x,lineNumber:353,columnNumber:17}}),__self:N,__source:{fileName:x,lineNumber:288,columnNumber:13}}))))}},42745(e,t,n){var r=n(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMicroSteps=t.getTaskProgressSummary=t.ensureSingleNext=t.advanceTaskProgress=void 0;var o=r(n(51750)),a=r(n(3791)),s=n(15547);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=t.ensureSingleNext=function(e){var t=!1,n=!1,r=e.map(function(e){if("in_progress"===e.status&&(n=!0),"next"===e.status){if(t)return i(i({},e),{},{status:"new"});t=!0}return e});if(!t&&!n&&r.length>0){var o=r.findIndex(function(e){return"new"===e.status}),a=o>=0?o:r.findIndex(function(e){return"done"!==e.status});a>=0&&(r[a]=i(i({},r[a]),{},{status:"next"}))}return r};t.advanceTaskProgress=function(e){if(e.completed||0===e.microSteps.length)return e;var t=(0,o.default)(e.microSteps),n=t.findIndex(function(e){return"in_progress"===e.status});if(n>=0)t[n]=i(i({},t[n]),{},{status:"done"});else{var r=t.findIndex(function(e){return"next"===e.status}),a=r>=0?r:t.findIndex(function(e){return"new"===e.status});a>=0&&(t[a]=i(i({},t[a]),{},{status:"in_progress"}))}var s=u(t),l=s.every(function(e){return"done"===e.status});return i(i({},e),{},{microSteps:s,completed:l})},t.getTaskProgressSummary=function(e){var t=e.filter(function(e){return"done"===e.status}).length;return"".concat(t,"/").concat(e.length," DONE")},t.normalizeMicroSteps=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=e.map(function(e,t){if("string"==typeof e)return{id:(0,s.generateId)(),text:e,status:0===t?"next":"new"};var n="new"===e.status||"next"===e.status||"in_progress"===e.status||"done"===e.status?e.status:0===t?"next":"new";return{id:e.id||(0,s.generateId)(),text:e.text,status:n}});return u(t)}}}]);