(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[39],{30039(e,t,n){var r=n(18772),o=n(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(16578)),s=r(n(51750)),l=r(n(3791)),i=r(n(26007)),u=r(n(58361)),c=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(r.get||r.set)?n(a,s,r):a[s]=e[s]);return a}(e)}(n(25602)),m=n(71582),d=r(n(40629)),f=r(n(93400)),p=r(n(46414)),_=n(15547),T=n(42745),g=n(56045),y=n(46586),b=n(2865),k=this,N="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\FogCutterScreen.tsx";function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=m.StyleSheet.create({container:{flex:1,backgroundColor:y.Tokens.colors.neutral.darkest},scrollContent:{flex:1,alignItems:"center"},content:{flex:1,width:"100%",maxWidth:y.Tokens.layout.maxWidth.prose,padding:y.Tokens.spacing[4]},header:{marginBottom:y.Tokens.spacing[6],flexDirection:"row",alignItems:"center",width:"100%",paddingBottom:y.Tokens.spacing[2],justifyContent:"space-between"},title:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.lg,fontWeight:"700",color:y.Tokens.colors.text.primary,letterSpacing:1,textTransform:"uppercase"},headerLine:{flex:1,height:1,backgroundColor:y.Tokens.colors.neutral.dark,marginLeft:y.Tokens.spacing[4]},creationCard:{marginBottom:y.Tokens.spacing[6],backgroundColor:y.Tokens.colors.neutral.darkest,padding:y.Tokens.spacing[4],borderRadius:y.Tokens.radii.none,borderWidth:1,borderColor:y.Tokens.colors.neutral.border},creationHeader:{marginBottom:y.Tokens.spacing[4]},cardTitle:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,fontWeight:"700",color:y.Tokens.colors.text.secondary,letterSpacing:1,textTransform:"uppercase"},input:S({backgroundColor:y.Tokens.colors.neutral.darker,borderRadius:y.Tokens.radii.none,paddingHorizontal:y.Tokens.spacing[3],color:y.Tokens.colors.text.primary,fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.sm,marginBottom:y.Tokens.spacing[3],height:48,borderWidth:1,borderColor:y.Tokens.colors.neutral.border},m.Platform.select({web:{outlineStyle:"none",transition:"border-color 0.2s ease"}})),inputFocused:{borderColor:y.Tokens.colors.brand[500],backgroundColor:y.Tokens.colors.neutral.darkest},addStepRow:{flexDirection:"row",marginBottom:y.Tokens.spacing[3],gap:y.Tokens.spacing[2]},stepInput:S({flex:1,backgroundColor:y.Tokens.colors.neutral.darker,borderRadius:y.Tokens.radii.none,paddingHorizontal:y.Tokens.spacing[3],color:y.Tokens.colors.text.primary,fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.sm,height:48,borderWidth:1,borderColor:y.Tokens.colors.neutral.border},m.Platform.select({web:{outlineStyle:"none",transition:"border-color 0.2s ease"}})),addButton:{width:48,height:48,paddingHorizontal:0,justifyContent:"center",alignItems:"center",borderRadius:y.Tokens.radii.none},previewContainer:{backgroundColor:y.Tokens.colors.neutral.darkest,borderRadius:y.Tokens.radii.none,padding:y.Tokens.spacing[4],marginBottom:y.Tokens.spacing[3],borderWidth:1,borderStyle:"dashed",borderColor:y.Tokens.colors.neutral.border},previewTitle:{fontFamily:y.Tokens.type.fontFamily.mono,color:y.Tokens.colors.text.tertiary,fontSize:y.Tokens.type.xxs,fontWeight:"700",marginBottom:y.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:1},microStep:{flexDirection:"row",alignItems:"center",paddingVertical:2},stepNumber:{color:y.Tokens.colors.text.tertiary,width:y.Tokens.spacing[6],fontSize:y.Tokens.type.xs,fontWeight:"bold",marginRight:y.Tokens.spacing[2],fontFamily:y.Tokens.type.fontFamily.mono},stepText:{fontFamily:y.Tokens.type.fontFamily.mono,color:y.Tokens.colors.text.secondary,fontSize:y.Tokens.type.sm},saveButton:{marginTop:y.Tokens.spacing[2]},divider:{height:1,backgroundColor:y.Tokens.colors.neutral.border,width:"100%",marginBottom:y.Tokens.spacing[6]},sectionHeader:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,fontWeight:"700",color:y.Tokens.colors.text.tertiary,textTransform:"uppercase",letterSpacing:1,marginBottom:y.Tokens.spacing[3]},taskList:{flex:1},listContent:{paddingBottom:y.Tokens.spacing[20]},taskCard:S({backgroundColor:y.Tokens.colors.neutral.darkest,borderRadius:y.Tokens.radii.none,padding:y.Tokens.spacing[4],marginBottom:-1,borderWidth:1,borderColor:y.Tokens.colors.neutral.border,minHeight:64,justifyContent:"center"},m.Platform.select({web:{transition:"all 0.2s ease",cursor:"pointer"}})),taskCardHovered:{borderColor:y.Tokens.colors.brand[500],zIndex:1},taskCardPressed:{backgroundColor:y.Tokens.colors.neutral.darker},taskCardCompleted:{opacity:.5,backgroundColor:y.Tokens.colors.neutral.darker},taskHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:y.Tokens.spacing[1]},taskText:{fontFamily:y.Tokens.type.fontFamily.sans,color:y.Tokens.colors.text.primary,fontSize:y.Tokens.type.base,fontWeight:"700",flex:1,marginRight:y.Tokens.spacing[2]},completed:{textDecorationLine:"line-through",color:y.Tokens.colors.text.secondary},doneBadge:{backgroundColor:y.Tokens.colors.neutral.dark,color:y.Tokens.colors.text.secondary,fontSize:y.Tokens.type.xxs,fontWeight:"700",paddingHorizontal:6,paddingVertical:2,borderRadius:y.Tokens.radii.none,overflow:"hidden",fontFamily:y.Tokens.type.fontFamily.mono},activeStepContainer:{marginTop:y.Tokens.spacing[2],paddingLeft:y.Tokens.spacing[2],borderLeftWidth:1,borderLeftColor:y.Tokens.colors.brand[500]},activeStepLabel:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xxs,color:y.Tokens.colors.text.tertiary,marginBottom:1,letterSpacing:.5},activeStepText:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,color:y.Tokens.colors.text.secondary},stepCountText:{fontFamily:y.Tokens.type.fontFamily.mono,color:y.Tokens.colors.text.tertiary,fontSize:y.Tokens.type.xs,letterSpacing:1},loadingContainer:{padding:y.Tokens.spacing[8],alignItems:"center",gap:y.Tokens.spacing[4]},loadingText:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,color:y.Tokens.colors.text.secondary,letterSpacing:1,textTransform:"uppercase"},emptyState:{alignItems:"center",marginTop:y.Tokens.spacing[8],opacity:.5},emptyIcon:{fontSize:y.Tokens.type["4xl"],marginBottom:y.Tokens.spacing[4]},emptyText:{fontFamily:y.Tokens.type.fontFamily.mono,color:y.Tokens.colors.text.secondary,fontSize:y.Tokens.type.sm,letterSpacing:2,textTransform:"uppercase"},emptyAction:{marginTop:y.Tokens.spacing[6]},guideBanner:{backgroundColor:y.Tokens.colors.neutral.dark,borderWidth:1,borderColor:y.Tokens.colors.brand[500],padding:y.Tokens.spacing[3],marginBottom:y.Tokens.spacing[6],flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:y.Tokens.spacing[4]},guideContent:{flex:1},guideTitle:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,fontWeight:"700",color:y.Tokens.colors.brand[500],marginBottom:y.Tokens.spacing[1],letterSpacing:1},guideText:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xs,color:y.Tokens.colors.text.primary},guideButton:{paddingVertical:4,paddingHorizontal:8,borderWidth:1,borderColor:y.Tokens.colors.neutral.border,backgroundColor:y.Tokens.colors.neutral.darkest},guideButtonPressed:{backgroundColor:y.Tokens.colors.neutral.darker},guideButtonText:{fontFamily:y.Tokens.type.fontFamily.mono,fontSize:y.Tokens.type.xxs,fontWeight:"700",color:y.Tokens.colors.text.primary,textTransform:"uppercase"}});t.default=function(e){var t=e.navigation,n=(0,c.useState)(""),r=(0,u.default)(n,2),o=r[0],l=r[1],x=(0,c.useState)([]),h=(0,u.default)(x,2),v=h[0],C=h[1],O=(0,c.useState)(""),w=(0,u.default)(O,2),P=w[0],F=w[1],I=(0,c.useState)([]),A=(0,u.default)(I,2),B=A[0],j=A[1],z=(0,c.useState)(null),R=(0,u.default)(z,2),L=R[0],D=R[1],V=(0,c.useState)(!0),W=(0,u.default)(V,2),H=W[0],M=W[1],G=(0,c.useState)(!1),K=(0,u.default)(G,2),U=K[0],Y=K[1],J=(0,c.useState)(!0),q=(0,u.default)(J,2),X=q[0],Q=q[1],Z=(0,c.useState)(null),$=(0,u.default)(Z,2),ee=$[0],te=$[1],ne=(0,c.useRef)(null);(0,c.useEffect)(function(){"android"===m.Platform.OS&&m.UIManager.setLayoutAnimationEnabledExperimental&&m.UIManager.setLayoutAnimationEnabledExperimental(!0);var e,t=(e=(0,i.default)(a.default.mark(function e(){var t,n,r,o,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([d.default.getJSON(d.default.STORAGE_KEYS.tasks),d.default.getJSON(d.default.STORAGE_KEYS.firstSuccessGuideState)]);case 1:t=e.sent,n=(0,u.default)(t,2),r=n[0],o=n[1],Q(!!o&&!!o.fogCutterDismissed),r&&Array.isArray(r)&&(s=r.filter(function(e){return Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.text)&&Array.isArray(null==e?void 0:e.microSteps))}).map(function(e){return S(S({},e),{},{microSteps:(0,T.normalizeMicroSteps)(e.microSteps)})}),j(s)),e.next=3;break;case 2:e.prev=2,l=e.catch(0),console.error("Failed to load tasks",l);case 3:return e.prev=3,M(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),function(){return e.apply(this,arguments)});t()},[]),(0,c.useEffect)(function(){d.default.setJSON(d.default.STORAGE_KEYS.tasks,B)},[B]);var re,oe=function(){P.trim()&&(C([].concat((0,s.default)(v),[P.trim()])),F(""))},ae=(re=(0,i.default)(a.default.mark(function e(){var n,r,o,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.LayoutAnimation.configureNext(m.LayoutAnimation.Presets.easeInEaseOut),Y(!1),Q(!0),e.next=1,d.default.getJSON(d.default.STORAGE_KEYS.firstSuccessGuideState);case 1:if(s=n=e.sent,!(o=null!==s)){e.next=2;break}o=void 0!==n;case 2:if(!o){e.next=3;break}l=n,e.next=4;break;case 3:l={};case 4:return r=l,e.next=5,d.default.setJSON(d.default.STORAGE_KEYS.firstSuccessGuideState,S(S({},r),{},{fogCutterDismissed:!0}));case 5:return e.next=6,p.default.requestPendingStart({source:"fogcutter_handoff",requestedAt:(new Date).toISOString(),context:{taskId:null!=ee?ee:void 0,reason:"user_completed_fog_cutter_decomposition"}});case 6:null==t||t.navigate(b.ROUTES.FOCUS);case 7:case"end":return e.stop()}},e)})),function(){return re.apply(this,arguments)});return c.default.createElement(m.SafeAreaView,{style:E.container,__self:k,__source:{fileName:N,lineNumber:183,columnNumber:5}},c.default.createElement(m.View,{style:E.scrollContent,__self:k,__source:{fileName:N,lineNumber:184,columnNumber:7}},c.default.createElement(m.View,{style:E.content,__self:k,__source:{fileName:N,lineNumber:185,columnNumber:9}},c.default.createElement(m.View,{style:E.header,__self:k,__source:{fileName:N,lineNumber:186,columnNumber:11}},c.default.createElement(m.Text,{style:E.title,__self:k,__source:{fileName:N,lineNumber:187,columnNumber:13}},"FOG_CUTTER"),c.default.createElement(m.View,{style:E.headerLine,__self:k,__source:{fileName:N,lineNumber:188,columnNumber:13}})),c.default.createElement(m.View,{style:E.creationCard,__self:k,__source:{fileName:N,lineNumber:191,columnNumber:11}},c.default.createElement(m.View,{style:E.creationHeader,__self:k,__source:{fileName:N,lineNumber:192,columnNumber:13}},c.default.createElement(m.Text,{style:E.cardTitle,__self:k,__source:{fileName:N,lineNumber:193,columnNumber:15}},"DECOMPOSE_TASK")),c.default.createElement(m.TextInput,{ref:ne,style:[E.input,"main"===L&&E.inputFocused],placeholder:"> INPUT_OVERWHELMING_TASK",placeholderTextColor:y.Tokens.colors.text.placeholder,value:o,onChangeText:l,onFocus:function(){return D("main")},onBlur:function(){return D(null)},__self:k,__source:{fileName:N,lineNumber:195,columnNumber:13}}),c.default.createElement(m.View,{style:E.addStepRow,__self:k,__source:{fileName:N,lineNumber:209,columnNumber:13}},c.default.createElement(m.TextInput,{style:[E.stepInput,"step"===L&&E.inputFocused],placeholder:"> ADD_MICRO_STEP",placeholderTextColor:y.Tokens.colors.text.placeholder,value:P,onChangeText:F,onSubmitEditing:oe,onFocus:function(){return D("step")},onBlur:function(){return D(null)},__self:k,__source:{fileName:N,lineNumber:210,columnNumber:15}}),c.default.createElement(g.LinearButton,{title:"+",onPress:oe,variant:"secondary",style:E.addButton,__self:k,__source:{fileName:N,lineNumber:223,columnNumber:15}})),v.length>0&&c.default.createElement(m.View,{style:E.previewContainer,__self:k,__source:{fileName:N,lineNumber:232,columnNumber:15}},c.default.createElement(m.Text,{style:E.previewTitle,__self:k,__source:{fileName:N,lineNumber:233,columnNumber:17}},"SEQUENCE:"),c.default.createElement(m.FlatList,{data:v,renderItem:function(e){var t=e.item,n=e.index;return c.default.createElement(m.View,{style:E.microStep,__self:k,__source:{fileName:N,lineNumber:174,columnNumber:5}},c.default.createElement(m.Text,{style:E.stepNumber,__self:k,__source:{fileName:N,lineNumber:175,columnNumber:7}},(n+1).toString().padStart(2,"0")),c.default.createElement(m.Text,{style:E.stepText,__self:k,__source:{fileName:N,lineNumber:178,columnNumber:7}},t))},keyExtractor:function(e,t){return t.toString()},scrollEnabled:!1,__self:k,__source:{fileName:N,lineNumber:234,columnNumber:17}})),c.default.createElement(g.LinearButton,{title:"EXECUTE_SAVE",onPress:function(){if(o.trim()&&v.length>0){var e=(0,T.normalizeMicroSteps)(v),t={id:(0,_.generateId)(),text:o,completed:!1,microSteps:e};j(function(e){return[].concat((0,s.default)(e),[t])}),te(t.id),X||U||(f.default.track("fog_cutter_first_task_saved"),m.LayoutAnimation.configureNext(m.LayoutAnimation.Presets.easeInEaseOut),Y(!0)),l(""),C([])}},disabled:0===v.length,size:"lg",style:E.saveButton,__self:k,__source:{fileName:N,lineNumber:243,columnNumber:13}})),c.default.createElement(m.View,{style:E.divider,__self:k,__source:{fileName:N,lineNumber:252,columnNumber:11}}),U&&c.default.createElement(m.View,{style:E.guideBanner,__self:k,__source:{fileName:N,lineNumber:255,columnNumber:13}},c.default.createElement(m.View,{style:E.guideContent,__self:k,__source:{fileName:N,lineNumber:256,columnNumber:15}},c.default.createElement(m.Text,{style:E.guideTitle,__self:k,__source:{fileName:N,lineNumber:257,columnNumber:17}},"CLARITY_ACHIEVED"),c.default.createElement(m.Text,{style:E.guideText,__self:k,__source:{fileName:N,lineNumber:258,columnNumber:17}},"READY. INITIATE_IGNITE_PROTOCOL.")),c.default.createElement(m.Pressable,{onPress:ae,style:function(e){var t=e.pressed;return[E.guideButton,t&&E.guideButtonPressed]},accessibilityRole:"button",accessibilityLabel:"Dismiss guidance",__self:k,__source:{fileName:N,lineNumber:262,columnNumber:15}},c.default.createElement(m.Text,{style:E.guideButtonText,__self:k,__source:{fileName:N,lineNumber:271,columnNumber:17}},"ACK"))),c.default.createElement(m.Text,{style:E.sectionHeader,__self:k,__source:{fileName:N,lineNumber:276,columnNumber:11}},"ACTIVE_OPERATIONS"),H?c.default.createElement(m.View,{style:E.loadingContainer,__self:k,__source:{fileName:N,lineNumber:279,columnNumber:13}},c.default.createElement(m.ActivityIndicator,{size:"small",color:y.Tokens.colors.text.primary,__self:k,__source:{fileName:N,lineNumber:280,columnNumber:15}}),c.default.createElement(m.Text,{style:E.loadingText,__self:k,__source:{fileName:N,lineNumber:284,columnNumber:15}},"LOADING...")):c.default.createElement(m.FlatList,{data:B,keyExtractor:function(e){return e.id},contentContainerStyle:E.listContent,renderItem:function(e){var t=e.item;return c.default.createElement(m.Pressable,{style:function(e){var n=e.pressed,r=e.hovered;return[E.taskCard,t.completed&&E.taskCardCompleted,r&&!t.completed&&E.taskCardHovered,n&&!t.completed&&E.taskCardPressed]},onPress:function(){return e=t.id,void j(function(t){return t.map(function(t){return t.id===e?(0,T.advanceTaskProgress)(t):t})});var e},__self:k,__source:{fileName:N,lineNumber:292,columnNumber:17}},c.default.createElement(m.View,{style:E.taskHeader,__self:k,__source:{fileName:N,lineNumber:307,columnNumber:19}},c.default.createElement(m.Text,{style:[E.taskText,t.completed&&E.completed],__self:k,__source:{fileName:N,lineNumber:308,columnNumber:21}},t.text),t.completed?c.default.createElement(m.Text,{style:E.doneBadge,__self:k,__source:{fileName:N,lineNumber:317,columnNumber:23}},"CMPLTD"):c.default.createElement(m.Text,{style:E.stepCountText,__self:k,__source:{fileName:N,lineNumber:319,columnNumber:23}},(0,T.getTaskProgressSummary)(t.microSteps))),!t.completed&&c.default.createElement(m.View,{style:E.activeStepContainer,__self:k,__source:{fileName:N,lineNumber:326,columnNumber:21}},c.default.createElement(m.Text,{style:E.activeStepLabel,__self:k,__source:{fileName:N,lineNumber:327,columnNumber:23}},t.microSteps.find(function(e){return"in_progress"===e.status})?"CURRENT_STEP >>":"NEXT_STEP >>"),c.default.createElement(m.Text,{style:E.activeStepText,numberOfLines:1,__self:k,__source:{fileName:N,lineNumber:332,columnNumber:23}},(t.microSteps.find(function(e){return"in_progress"===e.status})||t.microSteps.find(function(e){return"next"===e.status})||{text:"..."}).text)))},style:E.taskList,ListEmptyComponent:c.default.createElement(m.View,{style:E.emptyState,__self:k,__source:{fileName:N,lineNumber:352,columnNumber:17}},c.default.createElement(m.Text,{style:E.emptyIcon,__self:k,__source:{fileName:N,lineNumber:353,columnNumber:19}},"⛰️"),c.default.createElement(m.Text,{style:E.emptyText,__self:k,__source:{fileName:N,lineNumber:354,columnNumber:19}},"NO_ACTIVE_TASKS."),c.default.createElement(m.View,{style:E.emptyAction,__self:k,__source:{fileName:N,lineNumber:355,columnNumber:19}},c.default.createElement(g.LinearButton,{title:"CREATE FIRST TASK",onPress:function(){var e;return null===(e=ne.current)||void 0===e?void 0:e.focus()},variant:"secondary",__self:k,__source:{fileName:N,lineNumber:356,columnNumber:21}}))),__self:k,__source:{fileName:N,lineNumber:287,columnNumber:13}}))))}},42745(e,t,n){var r=n(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMicroSteps=t.getTaskProgressSummary=t.ensureSingleNext=t.advanceTaskProgress=void 0;var o=r(n(51750)),a=r(n(3791)),s=n(15547);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=t.ensureSingleNext=function(e){var t=!1,n=!1,r=e.map(function(e){if("in_progress"===e.status&&(n=!0),"next"===e.status){if(t)return i(i({},e),{},{status:"new"});t=!0}return e});if(!t&&!n&&r.length>0){var o=r.findIndex(function(e){return"new"===e.status}),a=o>=0?o:r.findIndex(function(e){return"done"!==e.status});a>=0&&(r[a]=i(i({},r[a]),{},{status:"next"}))}return r};t.advanceTaskProgress=function(e){if(e.completed||0===e.microSteps.length)return e;var t=(0,o.default)(e.microSteps),n=t.findIndex(function(e){return"in_progress"===e.status});if(n>=0)t[n]=i(i({},t[n]),{},{status:"done"});else{var r=t.findIndex(function(e){return"next"===e.status}),a=r>=0?r:t.findIndex(function(e){return"new"===e.status});a>=0&&(t[a]=i(i({},t[a]),{},{status:"in_progress"}))}var s=u(t),l=s.every(function(e){return"done"===e.status});return i(i({},e),{},{microSteps:s,completed:l})},t.getTaskProgressSummary=function(e){var t=e.filter(function(e){return"done"===e.status}).length;return"".concat(t,"/").concat(e.length," DONE")},t.normalizeMicroSteps=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=e.map(function(e,t){if("string"==typeof e)return{id:(0,s.generateId)(),text:e,status:0===t?"next":"new"};var n="new"===e.status||"next"===e.status||"in_progress"===e.status||"done"===e.status?e.status:0===t?"next":"new";return{id:e.id||(0,s.generateId)(),text:e.text,status:n}});return u(t)}}}]);