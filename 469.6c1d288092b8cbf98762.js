(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[469],{91469(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(r(16578)),a=n(r(3791)),l=n(r(26007)),i=n(r(58361)),u=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,n,s={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return s;if(r=t){if(r.has(e))return r.get(e);r.set(e,s)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(n.get||n.set)?r(s,a,n):s[a]=e[a]);return s}(e)}(r(25602)),c=r(71582),m=n(r(98759)),f=n(r(40629)),d=n(r(31771)),p=r(56045),b=r(46586),_=r(18878),y=this,g="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd\\src\\screens\\PomodoroScreen.tsx";function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var N=1500;t.default=function(){var e=(0,b.useTheme)().isCosmic,t=(0,u.useState)(!0),r=(0,i.default)(t,2),n=r[0],o=r[1],a=(0,u.useState)(0),T=(0,i.default)(a,2),h=T[0],E=T[1],S=(0,u.useRef)(n),C=(0,u.useRef)(null),x=(0,d.default)({initialTime:N,onComplete:function(){S.current?(E(function(e){return e+1}),o(!1),S.current=!1,m.default.playCompletionSound(),R(300)):(o(!0),S.current=!0,m.default.playNotificationSound(),R(N)),setTimeout(function(){return B()},0)}}),F=x.timeLeft,w=x.isRunning,O=x.formattedTime,B=x.start,v=x.pause,P=x.reset,R=x.setTime;(0,u.useEffect)(function(){S.current=n},[n]),(0,u.useEffect)(function(){var e,t=(e=(0,l.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,f.default.getJSON(f.default.STORAGE_KEYS.pomodoroState);case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:"boolean"==typeof t.isWorking&&o(t.isWorking),"number"==typeof t.timeLeft&&R(t.timeLeft),"number"==typeof t.sessions&&E(t.sessions);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});t()},[R]),(0,u.useEffect)(function(){return C.current&&clearTimeout(C.current),C.current=setTimeout(function(){f.default.setJSON(f.default.STORAGE_KEYS.pomodoroState,{isWorking:n,timeLeft:F,sessions:h})},5e3),function(){C.current&&clearTimeout(C.current)}},[n,F,h]);var W=function(){B()},j=function(){v()},D=function(){P(),o(!0),S.current=!0,R(N)},z=function(e){return c.StyleSheet.create({container:{flex:1,backgroundColor:"transparent"},content:{flex:1,padding:b.Tokens.spacing[6],alignItems:"center",justifyContent:"center",width:"100%",maxWidth:b.Tokens.layout.maxWidth.prose},header:{alignItems:"center",marginBottom:b.Tokens.spacing[10]},title:{fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type["4xl"],fontWeight:"800",color:e?"#EEF2FF":b.Tokens.colors.text.primary,marginBottom:b.Tokens.spacing[2],letterSpacing:2,textAlign:"center"},subtitle:k({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.base,color:e?"#B9C2D9":b.Tokens.colors.text.tertiary,textAlign:"center",letterSpacing:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),rationaleCard:{backgroundColor:e?"#111A33":b.Tokens.colors.neutral.darker,borderWidth:1,borderColor:e?"rgba(42, 53, 82, 0.3)":b.Tokens.colors.neutral.borderSubtle,padding:b.Tokens.spacing[4],marginBottom:b.Tokens.spacing[6],borderRadius:e?12:0},rationaleTitle:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,fontWeight:"700",color:e?"#8B5CF6":b.Tokens.colors.brand[500],letterSpacing:1,marginBottom:b.Tokens.spacing[2],textTransform:"uppercase"},rationaleText:{fontFamily:b.Tokens.type.fontFamily.body,fontSize:b.Tokens.type.sm,color:e?"#B9C2D9":b.Tokens.colors.text.secondary,lineHeight:22,flexWrap:"wrap"},sessionCounter:{flexDirection:"row",alignItems:"center",marginBottom:b.Tokens.spacing[8],backgroundColor:e?"#111A33":b.Tokens.colors.neutral.darker,paddingHorizontal:b.Tokens.spacing[4],paddingVertical:b.Tokens.spacing[2],borderRadius:e?8:b.Tokens.radii.none,borderWidth:1,borderColor:e?"rgba(42, 53, 82, 0.3)":b.Tokens.colors.neutral.borderSubtle,gap:b.Tokens.spacing[3]},sessionBadge:{backgroundColor:e?"#0B1022":b.Tokens.colors.brand[900],width:28,height:28,borderRadius:e?6:0,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:e?"#8B5CF6":b.Tokens.colors.brand[700]},sessionCount:{fontFamily:b.Tokens.type.fontFamily.mono,color:e?"#EEF2FF":b.Tokens.colors.brand[100],fontSize:b.Tokens.type.sm,fontWeight:"700"},sessionLabel:{fontFamily:b.Tokens.type.fontFamily.sans,color:e?"#B9C2D9":b.Tokens.colors.text.tertiary,fontSize:b.Tokens.type.sm,letterSpacing:.5},timerCard:{alignItems:"center",justifyContent:"center",marginBottom:b.Tokens.spacing[12],width:280,height:280,position:"relative",borderRadius:b.Tokens.radii.full,backgroundColor:e?"transparent":b.Tokens.colors.neutral.darker,borderWidth:e?0:1,borderColor:e?"transparent":b.Tokens.colors.neutral.borderSubtle},timerOverlay:{position:"absolute",alignItems:"center",justifyContent:"center"},phaseIndicator:k({position:"absolute",top:-1,left:-1,right:-1,bottom:-1,borderRadius:b.Tokens.radii.full,borderWidth:2,opacity:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.slow}})),phaseIndicatorFocus:{borderColor:b.Tokens.colors.error.main,backgroundColor:"transparent"},phaseIndicatorBreak:{borderColor:b.Tokens.colors.success.main,backgroundColor:"transparent"},timer:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.giga,fontWeight:"700",color:e?"#EEF2FF":b.Tokens.colors.text.primary,fontVariant:["tabular-nums"],textAlign:"center",letterSpacing:-2},phaseText:k({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.xl,fontWeight:"600",marginTop:b.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:2},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),phaseTextFocus:{color:e?"#EF4444":b.Tokens.colors.error.main},phaseTextBreak:{color:e?"#22C55E":b.Tokens.colors.success.main},controls:{width:"100%",maxWidth:320,gap:b.Tokens.spacing[4],marginTop:b.Tokens.spacing[8]},controlBtn:{width:"100%",borderRadius:e?8:0}})}(e);return u.default.createElement(_.CosmicBackground,{variant:"nebula",style:c.StyleSheet.absoluteFill,__self:y,__source:{fileName:g,lineNumber:122,columnNumber:5}},u.default.createElement(c.SafeAreaView,{style:z.container,__self:y,__source:{fileName:g,lineNumber:123,columnNumber:7}},u.default.createElement(c.View,{style:z.content,__self:y,__source:{fileName:g,lineNumber:124,columnNumber:9}},u.default.createElement(c.View,{style:z.header,__self:y,__source:{fileName:g,lineNumber:125,columnNumber:11}},u.default.createElement(c.Text,{style:z.title,__self:y,__source:{fileName:g,lineNumber:126,columnNumber:13}},"POMODORO"),u.default.createElement(c.Text,{style:z.subtitle,__self:y,__source:{fileName:g,lineNumber:127,columnNumber:13}},n?"FOCUS BLOCK":"RECOVERY BREAK")),u.default.createElement(c.View,{style:z.rationaleCard,__self:y,__source:{fileName:g,lineNumber:132,columnNumber:11}},u.default.createElement(c.Text,{style:z.rationaleTitle,__self:y,__source:{fileName:g,lineNumber:133,columnNumber:13}},"WHY THIS WORKS"),u.default.createElement(c.Text,{style:z.rationaleText,__self:y,__source:{fileName:g,lineNumber:134,columnNumber:13}},"Structured work/break cycles align with ADHD dopamine regulation. Short bursts (25 min) prevent hyperfocus burnout, while mandatory breaks restore attention. Evidence-based from CBT time-management protocols for sustained task persistence.")),u.default.createElement(c.View,{style:z.timerCard,__self:y,__source:{fileName:g,lineNumber:139,columnNumber:11}},e?u.default.createElement(u.default.Fragment,null,u.default.createElement(_.HaloRing,{mode:"progress",progress:1-F/(n?N:300),size:280,glow:w?"strong":"medium",color:n?"#EF4444":"#22C55E",__self:y,__source:{fileName:g,lineNumber:142,columnNumber:17}}),u.default.createElement(c.View,{style:z.timerOverlay,__self:y,__source:{fileName:g,lineNumber:149,columnNumber:17}},u.default.createElement(_.ChronoDigits,{value:O,size:"hero",glow:w?"strong":"none",color:n?"#EEF2FF":"#22C55E",__self:y,__source:{fileName:g,lineNumber:150,columnNumber:19}}),u.default.createElement(c.Text,{testID:"pomodoro-phase",style:[z.phaseText,n?z.phaseTextFocus:z.phaseTextBreak],__self:y,__source:{fileName:g,lineNumber:156,columnNumber:19}},n?"ðŸ”¥ FOCUS":"ðŸŒ¿ REST"))):u.default.createElement(u.default.Fragment,null,u.default.createElement(c.View,{style:[z.phaseIndicator,n?z.phaseIndicatorFocus:z.phaseIndicatorBreak],__self:y,__source:{fileName:g,lineNumber:166,columnNumber:17}}),u.default.createElement(c.Text,{testID:"timer-display",style:z.timer,__self:y,__source:{fileName:g,lineNumber:167,columnNumber:17}},O),u.default.createElement(c.Text,{testID:"pomodoro-phase",style:[z.phaseText,n?z.phaseTextFocus:z.phaseTextBreak],__self:y,__source:{fileName:g,lineNumber:170,columnNumber:17}},n?"ðŸ”¥ FOCUS":"ðŸŒ¿ REST"))),u.default.createElement(c.View,{style:z.sessionCounter,__self:y,__source:{fileName:g,lineNumber:177,columnNumber:11}},u.default.createElement(c.View,{style:z.sessionBadge,__self:y,__source:{fileName:g,lineNumber:178,columnNumber:13}},u.default.createElement(c.Text,{style:z.sessionCount,__self:y,__source:{fileName:g,lineNumber:179,columnNumber:15}},h)),u.default.createElement(c.Text,{style:z.sessionLabel,__self:y,__source:{fileName:g,lineNumber:181,columnNumber:13}},"COMPLETED SESSIONS")),u.default.createElement(c.View,{style:z.controls,__self:y,__source:{fileName:g,lineNumber:184,columnNumber:11}},w?e?u.default.createElement(_.RuneButton,{variant:"secondary",size:"lg",onPress:j,style:z.controlBtn,__self:y,__source:{fileName:g,lineNumber:207,columnNumber:17}},"Pause"):u.default.createElement(p.LinearButton,{title:"Pause",onPress:j,variant:"secondary",size:"lg",style:z.controlBtn,__self:y,__source:{fileName:g,lineNumber:216,columnNumber:17}}):e?u.default.createElement(_.RuneButton,{variant:"primary",size:"lg",glow:"medium",onPress:W,style:z.controlBtn,__self:y,__source:{fileName:g,lineNumber:187,columnNumber:17}},"Start Timer"):u.default.createElement(p.LinearButton,{title:"Start Timer",onPress:W,variant:n?"primary":"secondary",size:"lg",style:z.controlBtn,__self:y,__source:{fileName:g,lineNumber:197,columnNumber:17}}),e?u.default.createElement(_.RuneButton,{variant:"ghost",size:"md",onPress:D,style:z.controlBtn,__self:y,__source:{fileName:g,lineNumber:226,columnNumber:15}},"Reset"):u.default.createElement(p.LinearButton,{title:"Reset",onPress:D,variant:"ghost",size:"md",__self:y,__source:{fileName:g,lineNumber:235,columnNumber:15}})))))}}}]);