(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[898],{22517(e,t,o){var r=o(18772),n=o(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(o(16578)),s=r(o(3791)),l=r(o(26007)),i=r(o(58361)),c=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var o,r,a={__proto__:null,default:e};if(null===e||"object"!=n(e)&&"function"!=typeof e)return a;if(o=t){if(o.has(e))return o.get(e);o.set(e,a)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((r=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(r.get||r.set)?o(a,s,r):a[s]=e[s]);return a}(e)}(o(25602)),u=o(71582),m=o(20662),d=o(46586),f=o(59354),b=r(o(5500)),p="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd\\src\\screens\\InboxScreen.tsx",_=this;function k(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?k(Object(o),!0).forEach(function(t){(0,s.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var y=[{key:"all",label:"All"},{key:"unreviewed",label:"Unreviewed"},{key:"promoted",label:"Promoted"},{key:"discarded",label:"Discarded"}],N={voice:"ðŸŽ™ Voice",text:"âœï¸ Text",photo:"ðŸ“· Photo",paste:"ðŸ“‹ Paste",meeting:"ðŸ“ Meeting"};function C(e){var t=e.isCosmic,o=c.default.useRef(new u.Animated.Value(.3)).current;c.default.useEffect(function(){var e=u.Animated.loop(u.Animated.sequence([u.Animated.timing(o,{toValue:.7,duration:800,easing:u.Easing.inOut(u.Easing.ease),useNativeDriver:!0}),u.Animated.timing(o,{toValue:.3,duration:800,easing:u.Easing.inOut(u.Easing.ease),useNativeDriver:!0})]));return e.start(),function(){return e.stop()}},[o]);var r=t?x.skeletonBgCosmic:x.skeletonBgLinear,n=t?x.skeletonBlockCosmic:x.skeletonBlockLinear;return c.default.createElement(u.View,{style:[x.row,r],__self:this,__source:{fileName:p,lineNumber:84,columnNumber:5}},c.default.createElement(u.View,{style:x.rowMeta,__self:this,__source:{fileName:p,lineNumber:86,columnNumber:7}},c.default.createElement(u.Animated.View,{style:[x.skeletonBadge,n,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:87,columnNumber:9}}),c.default.createElement(u.Animated.View,{style:[x.skeletonTime,n,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:90,columnNumber:9}})),c.default.createElement(u.View,{style:x.skeletonContent,__self:this,__source:{fileName:p,lineNumber:94,columnNumber:7}},c.default.createElement(u.Animated.View,{style:[x.skeletonText,n,x.w90,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:95,columnNumber:9}}),c.default.createElement(u.Animated.View,{style:[x.skeletonText,n,x.w60,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:98,columnNumber:9}})),c.default.createElement(u.View,{style:x.actions,__self:this,__source:{fileName:p,lineNumber:104,columnNumber:7}},c.default.createElement(u.Animated.View,{style:[x.skeletonBtn,n,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:105,columnNumber:9}}),c.default.createElement(u.Animated.View,{style:[x.skeletonBtn,n,{opacity:o}],__self:this,__source:{fileName:p,lineNumber:106,columnNumber:9}})))}function T(e){var t,o,r=e.item,n=e.onPromoteTask,a=e.onPromoteNote,s=e.onDiscard,l=e.isCosmic,i="unreviewed"===r.status;return c.default.createElement(u.View,{testID:"capture-row-".concat(r.id),style:[x.row,l?x.rowCosmic:x.rowLinear,!i&&x.rowReviewed],__self:this,__source:{fileName:p,lineNumber:130,columnNumber:5}},c.default.createElement(u.View,{style:x.rowMeta,__self:this,__source:{fileName:p,lineNumber:139,columnNumber:7}},c.default.createElement(u.Text,{style:[x.sourceBadge,l&&x.sourceBadgeCosmic],__self:this,__source:{fileName:p,lineNumber:140,columnNumber:9}},null!==(t=N[r.source])&&void 0!==t?t:r.source),c.default.createElement(u.Text,{style:[x.timestamp,l&&x.timestampCosmic],__self:this,__source:{fileName:p,lineNumber:145,columnNumber:9}},function(e){var t=Date.now()-e,o=Math.floor(t/6e4);if(o<1)return"just now";if(o<60)return"".concat(o,"m ago");var r=Math.floor(o/60);return r<24?"".concat(r,"h ago"):"".concat(Math.floor(r/24),"d ago")}(r.createdAt)),"unreviewed"!==r.status&&c.default.createElement(u.Text,{style:[x.statusBadge,h(r.status,l)],__self:this,__source:{fileName:p,lineNumber:149,columnNumber:11}},r.status.toUpperCase())),c.default.createElement(u.Text,{style:[x.rawText,l&&x.rawTextCosmic],numberOfLines:3,__self:this,__source:{fileName:p,lineNumber:161,columnNumber:7}},null!==(o=r.transcript)&&void 0!==o?o:r.raw),i&&c.default.createElement(u.View,{style:x.actions,__self:this,__source:{fileName:p,lineNumber:170,columnNumber:9}},c.default.createElement(u.Pressable,{testID:"promote-task-".concat(r.id),onPress:function(){return n(r.id)},style:function(e){var t=e.pressed;return[x.actionBtn,l?x.actionBtnTaskCosmic:x.actionBtnTaskLinear,t&&x.actionBtnPressed]},accessibilityLabel:"Promote to task",__self:this,__source:{fileName:p,lineNumber:171,columnNumber:11}},c.default.createElement(u.Text,{style:[x.actionBtnText,l&&x.actionBtnTextCosmic],__self:this,__source:{fileName:p,lineNumber:183,columnNumber:13}},"â†’ Task")),c.default.createElement(u.Pressable,{testID:"promote-note-".concat(r.id),onPress:function(){return a(r.id)},style:function(e){var t=e.pressed;return[x.actionBtn,l?x.actionBtnNoteCosmic:x.actionBtnNoteLinear,t&&x.actionBtnPressed]},accessibilityLabel:"Promote to note",__self:this,__source:{fileName:p,lineNumber:193,columnNumber:11}},c.default.createElement(u.Text,{style:[x.actionBtnText,l&&x.actionBtnTextCosmic],__self:this,__source:{fileName:p,lineNumber:205,columnNumber:13}},"â†’ Note")),c.default.createElement(u.Pressable,{testID:"discard-".concat(r.id),onPress:function(){return s(r.id)},style:function(e){var t=e.pressed;return[x.actionBtn,l?x.actionBtnDiscardCosmic:x.actionBtnDiscardLinear,t&&x.actionBtnPressed]},accessibilityLabel:"Discard",__self:this,__source:{fileName:p,lineNumber:215,columnNumber:11}},c.default.createElement(u.Text,{style:[x.actionBtnText,x.actionBtnTextDiscard],__self:this,__source:{fileName:p,lineNumber:227,columnNumber:13}},"Discard"))))}function h(e,t){return"promoted"===e?t?x.statusBadgePromotedCosmic:x.statusBadgePromotedLinear:t?x.statusBadgeDiscardedCosmic:x.statusBadgeDiscardedLinear}var x=u.StyleSheet.create({container:{flex:1},skeletonBgLinear:{backgroundColor:d.Tokens.colors.neutral.darker,borderColor:d.Tokens.colors.neutral.borderSubtle},skeletonBgCosmic:{backgroundColor:"rgba(17, 26, 51, 0.4)",borderColor:"rgba(185, 194, 217, 0.08)"},skeletonBlockLinear:{backgroundColor:d.Tokens.colors.neutral[500]},skeletonBlockCosmic:{backgroundColor:"rgba(185, 194, 217, 0.2)"},skeletonBadge:{width:60,height:16,borderRadius:4},skeletonTime:{width:40,height:12,borderRadius:4},skeletonContent:{marginVertical:4},skeletonText:{height:12,borderRadius:4},w90:{width:"90%",marginBottom:8},w60:{width:"60%"},skeletonBtn:{width:70,height:28,borderRadius:6},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:d.Tokens.spacing[4],paddingVertical:d.Tokens.spacing[3],borderBottomWidth:1,borderBottomColor:d.Tokens.colors.neutral.borderSubtle},headerCosmic:{borderBottomColor:"rgba(185, 194, 217, 0.12)"},closeBtn:{width:36,height:36,alignItems:"center",justifyContent:"center"},closeBtnText:{fontSize:18,color:d.Tokens.colors.text.secondary},closeBtnTextCosmic:{color:"#B9C2D9"},closeBtnPlaceholder:{width:36},title:g({fontFamily:d.Tokens.type.fontFamily.sans,fontSize:d.Tokens.type.base,fontWeight:"700",color:d.Tokens.colors.text.primary,letterSpacing:2,textTransform:"uppercase"},u.Platform.select({web:{textShadow:"none"}})),titleCosmic:g({color:"#EEF2FF",fontFamily:"Space Grotesk"},u.Platform.select({web:{textShadow:"0 0 16px rgba(139, 92, 246, 0.3)"}})),tabs:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:d.Tokens.colors.neutral.borderSubtle,backgroundColor:d.Tokens.colors.neutral.darker},tabsCosmic:{backgroundColor:"#0B1022",borderBottomColor:"rgba(42, 53, 82, 0.3)"},tab:{flex:1,paddingVertical:d.Tokens.spacing[3],alignItems:"center"},tabActiveLinear:{borderBottomWidth:2,borderBottomColor:d.Tokens.colors.indigo.primary},tabActiveCosmic:{borderBottomWidth:2,borderBottomColor:"#8B5CF6"},tabText:{fontFamily:d.Tokens.type.fontFamily.sans,fontSize:d.Tokens.type.xs,fontWeight:"600",color:d.Tokens.colors.text.tertiary,letterSpacing:.5},tabTextCosmic:{color:"#6B7A9C"},tabTextActiveLinear:{color:d.Tokens.colors.indigo.primary},tabTextActiveCosmic:{color:"#8B5CF6"},listContent:{padding:d.Tokens.spacing[4],gap:d.Tokens.spacing[3]},centered:{flex:1,alignItems:"center",justifyContent:"center",padding:d.Tokens.spacing[8]},emptyText:{fontFamily:d.Tokens.type.fontFamily.body,fontSize:d.Tokens.type.base,color:d.Tokens.colors.text.tertiary,textAlign:"center",lineHeight:24},emptyTextCosmic:{color:"#6B7A9C"},row:{borderRadius:8,padding:d.Tokens.spacing[4],borderWidth:1,gap:d.Tokens.spacing[3]},rowLinear:{backgroundColor:d.Tokens.colors.neutral.darker,borderColor:d.Tokens.colors.neutral.borderSubtle},rowCosmic:g({backgroundColor:"rgba(17, 26, 51, 0.7)",borderColor:"rgba(185, 194, 217, 0.12)"},u.Platform.select({web:{backdropFilter:"blur(12px)",boxShadow:"0 0 0 1px rgba(139, 92, 246, 0.06), 0 4px 16px rgba(7, 7, 18, 0.3)"}})),rowReviewed:{opacity:.65},rowMeta:{flexDirection:"row",alignItems:"center",gap:d.Tokens.spacing[2],flexWrap:"wrap"},sourceBadge:{fontFamily:d.Tokens.type.fontFamily.mono,fontSize:d.Tokens.type.xs,fontWeight:"600",color:d.Tokens.colors.brand[500],backgroundColor:d.Tokens.colors.neutral.dark,paddingHorizontal:d.Tokens.spacing[2],paddingVertical:2,borderRadius:4,overflow:"hidden"},sourceBadgeCosmic:{color:"#8B5CF6",backgroundColor:"rgba(139, 92, 246, 0.12)"},timestamp:{fontFamily:d.Tokens.type.fontFamily.mono,fontSize:d.Tokens.type.xs,color:d.Tokens.colors.text.tertiary},timestampCosmic:{color:"#6B7A9C"},statusBadge:{fontFamily:d.Tokens.type.fontFamily.mono,fontSize:10,fontWeight:"700",paddingHorizontal:d.Tokens.spacing[2],paddingVertical:2,borderRadius:4,overflow:"hidden",letterSpacing:.5},statusBadgePromotedLinear:{color:d.Tokens.colors.success.main,backgroundColor:d.Tokens.colors.success.subtle},statusBadgePromotedCosmic:{color:"#2DD4BF",backgroundColor:"rgba(45, 212, 191, 0.12)"},statusBadgeDiscardedLinear:{color:d.Tokens.colors.error.main,backgroundColor:d.Tokens.colors.error.subtle},statusBadgeDiscardedCosmic:{color:"#FB7185",backgroundColor:"rgba(251, 113, 133, 0.1)"},rawText:{fontFamily:d.Tokens.type.fontFamily.body,fontSize:d.Tokens.type.sm,color:d.Tokens.colors.text.primary,lineHeight:20},rawTextCosmic:{color:"#B9C2D9"},actions:{flexDirection:"row",gap:d.Tokens.spacing[2],flexWrap:"wrap"},actionBtn:{paddingHorizontal:d.Tokens.spacing[3],paddingVertical:d.Tokens.spacing[1],borderRadius:6,borderWidth:1},actionBtnPressed:{opacity:.7,transform:[{scale:.97}]},actionBtnTaskLinear:{borderColor:d.Tokens.colors.indigo.primary,backgroundColor:d.Tokens.colors.indigo.subtle},actionBtnTaskCosmic:{borderColor:"#8B5CF6",backgroundColor:"rgba(139, 92, 246, 0.12)"},actionBtnNoteLinear:{borderColor:d.Tokens.colors.brand[400],backgroundColor:"transparent"},actionBtnNoteCosmic:{borderColor:"#B9C2D9",backgroundColor:"rgba(185, 194, 217, 0.08)"},actionBtnDiscardLinear:{borderColor:d.Tokens.colors.error.main,backgroundColor:"transparent"},actionBtnDiscardCosmic:{borderColor:"rgba(251, 113, 133, 0.4)",backgroundColor:"transparent"},actionBtnText:{fontFamily:d.Tokens.type.fontFamily.sans,fontSize:d.Tokens.type.xs,fontWeight:"600",color:d.Tokens.colors.text.primary,letterSpacing:.3},actionBtnTextCosmic:{color:"#EEF2FF"},actionBtnTextDiscard:{color:d.Tokens.colors.error.main},bgCosmic:{backgroundColor:"#070712"},bgLinear:{backgroundColor:d.Tokens.colors.neutral.darkest}});t.default=function(){var e=(0,m.useNavigation)(),t=(0,f.useTheme)().isCosmic,o=(0,c.useState)([]),r=(0,i.default)(o,2),n=r[0],s=r[1],d=(0,c.useState)("all"),k=(0,i.default)(d,2),g=k[0],N=k[1],h=(0,c.useState)(!0),w=(0,i.default)(h,2),B=w[0],v=w[1],E=(0,c.useCallback)((0,l.default)(a.default.mark(function e(){var t,o,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="all"===g?void 0:{status:g},e.next=1,b.default.getAll(t);case 1:o=e.sent,s(o),e.next=3;break;case 2:e.prev=2,r=e.catch(0),console.error("[InboxScreen] loadItems error:",r);case 3:return e.prev=3,v(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),[g]);(0,c.useEffect)(function(){var e=!0;return v(!0),b.default.getAll("all"===g?void 0:{status:g}).then(function(t){e&&(s(t),v(!1))}).catch(function(t){console.error("[InboxScreen] load error:",t),e&&v(!1)}),function(){e=!1}},[g]),(0,c.useEffect)(function(){return b.default.subscribe(function(){E()})},[E]);var P,D,S,F=(0,c.useCallback)((P=(0,l.default)(a.default.mark(function e(t){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,b.default.promote(t,"task");case 1:e.next=3;break;case 2:e.prev=2,o=e.catch(0),console.error("[InboxScreen] promote task error:",o);case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e){return P.apply(this,arguments)}),[]),V=(0,c.useCallback)((D=(0,l.default)(a.default.mark(function e(t){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,b.default.promote(t,"note");case 1:e.next=3;break;case 2:e.prev=2,o=e.catch(0),console.error("[InboxScreen] promote note error:",o);case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e){return D.apply(this,arguments)}),[]),A=(0,c.useCallback)((S=(0,l.default)(a.default.mark(function e(t){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,b.default.discard(t);case 1:e.next=3;break;case 2:e.prev=2,o=e.catch(0),console.error("[InboxScreen] discard error:",o);case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(e){return S.apply(this,arguments)}),[]),L=(0,c.useCallback)(function(e){var o=e.item;return c.default.createElement(T,{item:o,onPromoteTask:F,onPromoteNote:V,onDiscard:A,isCosmic:t,__self:_,__source:{fileName:p,lineNumber:354,columnNumber:7}})},[F,V,A,t]);return c.default.createElement(u.SafeAreaView,{style:[x.container,t?x.bgCosmic:x.bgLinear],testID:"inbox-screen",__self:_,__source:{fileName:p,lineNumber:366,columnNumber:5}},c.default.createElement(u.View,{style:[x.header,t&&x.headerCosmic],__self:_,__source:{fileName:p,lineNumber:371,columnNumber:7}},c.default.createElement(u.Pressable,{onPress:function(){return e.goBack()},style:x.closeBtn,testID:"inbox-close",accessibilityLabel:"Close inbox",__self:_,__source:{fileName:p,lineNumber:372,columnNumber:9}},c.default.createElement(u.Text,{style:[x.closeBtnText,t&&x.closeBtnTextCosmic],__self:_,__source:{fileName:p,lineNumber:378,columnNumber:11}},"âœ•")),c.default.createElement(u.Text,{style:[x.title,t&&x.titleCosmic],__self:_,__source:{fileName:p,lineNumber:384,columnNumber:9}},"CAPTURE INBOX"),c.default.createElement(u.View,{style:x.closeBtnPlaceholder,__self:_,__source:{fileName:p,lineNumber:387,columnNumber:9}})),c.default.createElement(u.View,{style:[x.tabs,t&&x.tabsCosmic],testID:"inbox-filter-tabs",__self:_,__source:{fileName:p,lineNumber:391,columnNumber:7}},y.map(function(e){return c.default.createElement(u.Pressable,{key:e.key,onPress:function(){return N(e.key)},style:[x.tab,g===e.key&&(t?x.tabActiveCosmic:x.tabActiveLinear)],testID:"inbox-tab-".concat(e.key),accessibilityRole:"tab",accessibilityState:{selected:g===e.key},__self:_,__source:{fileName:p,lineNumber:396,columnNumber:11}},c.default.createElement(u.Text,{style:[x.tabText,t&&x.tabTextCosmic,g===e.key&&(t?x.tabTextActiveCosmic:x.tabTextActiveLinear)],__self:_,__source:{fileName:p,lineNumber:408,columnNumber:13}},e.label))})),B?c.default.createElement(u.View,{style:x.listContent,__self:_,__source:{fileName:p,lineNumber:426,columnNumber:9}},[1,2,3].map(function(e){return c.default.createElement(C,{key:e,isCosmic:t,__self:_,__source:{fileName:p,lineNumber:428,columnNumber:13}})})):0===n.length?c.default.createElement(u.View,{style:x.centered,testID:"inbox-empty",__self:_,__source:{fileName:p,lineNumber:432,columnNumber:9}},c.default.createElement(u.Text,{style:[x.emptyText,t&&x.emptyTextCosmic],__self:_,__source:{fileName:p,lineNumber:433,columnNumber:11}},"unreviewed"===g?"Nothing to review.\nCapture something with the bubble!":"No items here yet.")):c.default.createElement(u.FlatList,{data:n,keyExtractor:function(e){return e.id},renderItem:L,contentContainerStyle:x.listContent,testID:"inbox-list",showsVerticalScrollIndicator:!1,__self:_,__source:{fileName:p,lineNumber:440,columnNumber:9}}))}}}]);