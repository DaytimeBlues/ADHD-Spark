(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[728],{26216(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(16578)),i=n(r(26007)),a=n(r(66584)),s=r(8747),l=["task","event","reminder","thought","worry","idea"],u=["high","medium","low"];function c(e){if(!e||"object"!==(0,a.default)(e))return!1;var t=e;return"string"==typeof t.text&&l.includes(t.category)&&u.includes(t.priority)}function d(e){if(!e||"object"!==(0,a.default)(e))throw new Error("Invalid AI sort response payload.");var t=e;if(!Array.isArray(t.sorted)||!t.sorted.every(c))throw new Error("Invalid AI sort response schema.");return{sorted:t.sorted}}var m={sortItems:function(e,t){return(0,i.default)(o.default.mark(function r(){var n,i,a,l;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(n=e.map(function(e){return e.trim()}).filter(Boolean).slice(0,100)).length){r.next=1;break}return r.abrupt("return",[]);case 1:return r.next=2,fetch("".concat(s.config.apiBaseUrl,"/api/sort"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n,timezone:t})});case 2:return i=r.sent,r.next=3,i.json();case 3:if(a=r.sent,i.ok){r.next=4;break}throw l=a&&"string"==typeof a.error?a.error:"Unable to sort items right now.",new Error(l);case 4:return r.abrupt("return",d(a).sorted);case 5:case"end":return r.stop()}},r)}))()}};t.default=m},51728(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(16578)),a=n(r(51750)),s=n(r(3791)),l=n(r(26007)),u=n(r(58361)),c=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,n,i={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return i;if(r=t){if(r.has(e))return r.get(e);r.set(e,i)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(n.get||n.set)?r(i,a,n):i[a]=e[a]);return i}(e)}(r(25602)),d=r(71582),m=r(20662),f=n(r(40629)),p=n(r(93400)),g=n(r(81731)),b=n(r(75128)),y=n(r(41262)),_=n(r(26216)),T=r(15547),N=r(56045),k=r(46586),x=this,h="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\BrainDumpScreen.tsx";function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S={top:k.Tokens.spacing[4],bottom:k.Tokens.spacing[4],left:k.Tokens.spacing[4],right:k.Tokens.spacing[4]},E=["task","event","reminder","worry","thought","idea"],w=d.StyleSheet.create({container:{flex:1,backgroundColor:"#000000"},centerContainer:{flex:1,alignItems:"center"},contentWrapper:{flex:1,width:"100%",maxWidth:k.Tokens.layout.maxWidth.prose,padding:k.Tokens.spacing[6]},header:{marginBottom:k.Tokens.spacing[8],borderBottomWidth:1,borderColor:"#333333",paddingBottom:k.Tokens.spacing[4]},title:{fontFamily:k.Tokens.type.fontFamily.sans,fontSize:k.Tokens.type["5xl"],fontWeight:"900",color:"#FFFFFF",marginBottom:k.Tokens.spacing[2],letterSpacing:-2,textTransform:"uppercase"},subtitle:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xs,color:"#666666",letterSpacing:1,textTransform:"uppercase"},inputSection:{flexDirection:"row",marginBottom:k.Tokens.spacing[8],gap:k.Tokens.spacing[3],alignItems:"center"},inputWrapper:F({flex:1,backgroundColor:"#050505",borderRadius:0,borderWidth:1,borderColor:"#333333",minHeight:56,justifyContent:"center"},d.Platform.select({web:{transition:"border-color 0.2s ease"}})),inputWrapperFocused:{borderColor:"#FFFFFF"},input:F({paddingHorizontal:k.Tokens.spacing[4],color:"#FFFFFF",fontFamily:k.Tokens.type.fontFamily.sans,fontSize:k.Tokens.type.base,minHeight:56,textAlignVertical:"center",paddingVertical:0},d.Platform.select({web:{outlineStyle:"none"}})),addButton:{minHeight:56,width:80,justifyContent:"center",alignItems:"center",borderRadius:0},actionsBar:{flexDirection:"row",justifyContent:"space-between",marginBottom:k.Tokens.spacing[4],paddingHorizontal:k.Tokens.spacing[2],alignItems:"center"},actionsRight:{flexDirection:"row",alignItems:"center",gap:k.Tokens.spacing[4]},actionButton:F({paddingVertical:k.Tokens.spacing[2],paddingHorizontal:k.Tokens.spacing[3],borderRadius:0},d.Platform.select({web:{transition:"all 0.2s ease"}})),actionButtonDisabled:{opacity:.5,pointerEvents:"none"},clearHovered:{backgroundColor:"#222222"},clearPressed:{opacity:.7},countText:{fontFamily:k.Tokens.type.fontFamily.mono,color:"#666666",fontSize:k.Tokens.type.xs,fontWeight:"700",letterSpacing:1},clearText:{fontFamily:k.Tokens.type.fontFamily.mono,color:"#CC0000",fontSize:k.Tokens.type.xs,fontWeight:"700",letterSpacing:1},aiSortText:{fontFamily:k.Tokens.type.fontFamily.mono,color:"#FFFFFF",fontSize:k.Tokens.type.xs,fontWeight:"700",letterSpacing:1},sortedSection:{marginTop:k.Tokens.spacing[6],marginBottom:k.Tokens.spacing[6],padding:k.Tokens.spacing[5],backgroundColor:"#050505",borderRadius:0,borderWidth:1,borderStyle:"dashed",borderColor:"#333333"},sortedTitle:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.sm,fontWeight:"700",color:"#FFFFFF",marginBottom:k.Tokens.spacing[4],letterSpacing:1,textTransform:"uppercase"},sortedGroup:{marginBottom:k.Tokens.spacing[5]},sortedCategory:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xs,fontWeight:"700",color:"#666666",textTransform:"uppercase",letterSpacing:1,marginBottom:k.Tokens.spacing[3],opacity:.9},sortedItemRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",paddingVertical:k.Tokens.spacing[2],marginBottom:k.Tokens.spacing[1]},sortedItemText:{flex:1,fontFamily:k.Tokens.type.fontFamily.sans,fontSize:k.Tokens.type.sm,color:"#CCCCCC",lineHeight:1.5*k.Tokens.type.sm,marginRight:k.Tokens.spacing[3]},priorityBadge:{paddingHorizontal:k.Tokens.spacing[2],paddingVertical:2,borderRadius:0,minWidth:50,alignItems:"center",borderWidth:1,borderColor:"#333333"},priorityText:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xxs,fontWeight:"700",textTransform:"uppercase",color:"#FFFFFF"},priorityHigh:{backgroundColor:"#CC0000",borderColor:"#CC0000"},priorityMedium:{backgroundColor:"#333333"},priorityLow:{backgroundColor:"#111111"},listContent:{paddingBottom:120},item:F({backgroundColor:"#000000",borderRadius:0,paddingHorizontal:k.Tokens.spacing[5],paddingVertical:k.Tokens.spacing[4],marginBottom:-1,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderWidth:1,borderColor:"#333333"},d.Platform.select({web:{transition:"all 0.2s ease"}})),itemText:{flex:1,color:"#FFFFFF",fontFamily:k.Tokens.type.fontFamily.sans,fontSize:k.Tokens.type.base,lineHeight:1.5*k.Tokens.type.base,marginRight:k.Tokens.spacing[4]},deleteButton:F({padding:k.Tokens.spacing[2],borderRadius:0,width:36,height:36,alignItems:"center",justifyContent:"center"},d.Platform.select({web:{transition:"all 0.2s ease"}})),deleteButtonHovered:{backgroundColor:"#222222"},deleteButtonPressed:{backgroundColor:"#333333"},deleteText:{color:"#666666",fontSize:k.Tokens.type.h3,fontWeight:"300",marginTop:-4},emptyState:{alignItems:"center",marginTop:k.Tokens.spacing[12],opacity:.3},emptyIcon:{fontSize:k.Tokens.type["5xl"],marginBottom:k.Tokens.spacing[4]},emptyText:{fontFamily:k.Tokens.type.fontFamily.mono,color:"#666666",fontSize:k.Tokens.type.sm,letterSpacing:2,textTransform:"uppercase"},recordSection:{alignItems:"center",marginBottom:k.Tokens.spacing[8]},recordButton:F({flexDirection:"row",alignItems:"center",backgroundColor:"#000000",paddingHorizontal:k.Tokens.spacing[6],paddingVertical:k.Tokens.spacing[3],borderRadius:0,borderWidth:1,borderColor:"#333333",minWidth:160,justifyContent:"center"},d.Platform.select({web:{transition:"all 0.2s ease",cursor:"pointer"}})),recordButtonHovered:{borderColor:"#FFFFFF"},recordButtonActive:{backgroundColor:"#FF0000",borderColor:"#FF0000"},recordButtonProcessing:{opacity:.5,backgroundColor:"#222222"},recordButtonPressed:{opacity:.8},recordIcon:{fontSize:k.Tokens.type.h3,marginRight:k.Tokens.spacing[2],color:"#FFFFFF"},recordText:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.sm,fontWeight:"700",color:"#FFFFFF",letterSpacing:1},recordHint:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xxs,color:"#666666",marginTop:k.Tokens.spacing[2],letterSpacing:.5,textTransform:"uppercase"},errorText:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xs,color:"#CC0000",marginTop:k.Tokens.spacing[2],textAlign:"center"},loadingContainer:{padding:k.Tokens.spacing[8],alignItems:"center",gap:k.Tokens.spacing[4]},guideBanner:{backgroundColor:"#111111",borderWidth:1,borderColor:"#CC0000",padding:k.Tokens.spacing[4],marginBottom:k.Tokens.spacing[6],flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:k.Tokens.spacing[4]},guideContent:{flex:1},guideTitle:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xs,fontWeight:"700",color:"#CC0000",marginBottom:k.Tokens.spacing[1],letterSpacing:1},guideText:{fontFamily:k.Tokens.type.fontFamily.sans,fontSize:k.Tokens.type.sm,color:"#FFFFFF",lineHeight:18},guideButton:{paddingVertical:k.Tokens.spacing[2],paddingHorizontal:k.Tokens.spacing[3],borderWidth:1,borderColor:"#333333",backgroundColor:"#000000"},guideButtonPressed:{backgroundColor:"#222222"},guideButtonText:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.xs,fontWeight:"700",color:"#FFFFFF",textTransform:"uppercase"},loadingText:{fontFamily:k.Tokens.type.fontFamily.mono,fontSize:k.Tokens.type.sm,color:"#666666",letterSpacing:1,textTransform:"uppercase"}});t.default=function(){var e,t,r=(0,m.useRoute)(),n=(0,c.useState)(""),o=(0,u.default)(n,2),s=o[0],v=o[1],C=(0,c.useState)([]),R=(0,u.default)(C,2),A=R[0],I=R[1],O=(0,c.useState)(!1),P=(0,u.default)(O,2),B=P[0],H=P[1],D=(0,c.useState)("idle"),L=(0,u.default)(D,2),W=L[0],z=L[1],j=(0,c.useState)(null),V=(0,u.default)(j,2),M=V[0],G=V[1],U=(0,c.useState)(!1),Y=(0,u.default)(U,2),K=Y[0],J=Y[1],q=(0,c.useState)(!0),Q=(0,u.default)(q,2),X=Q[0],Z=Q[1],$=(0,c.useState)(null),ee=(0,u.default)($,2),te=ee[0],re=ee[1],ne=(0,c.useState)([]),oe=(0,u.default)(ne,2),ie=oe[0],ae=oe[1],se=(0,c.useState)(!1),le=(0,u.default)(se,2),ue=le[0],ce=le[1],de=(0,c.useState)(!0),me=(0,u.default)(de,2),fe=me[0],pe=me[1],ge=(0,c.useRef)(!1),be=(0,c.useRef)(!1),ye=(0,c.useRef)(null),_e=(0,c.useRef)(null),Te=(0,c.useRef)(0),Ne=(t=(0,l.default)(i.default.mark(function e(){var t,r,n,o,a,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([f.default.getJSON(f.default.STORAGE_KEYS.brainDump),f.default.getJSON(f.default.STORAGE_KEYS.firstSuccessGuideState)]);case 1:t=e.sent,r=(0,u.default)(t,2),n=r[0],o=r[1],pe(!!o&&!!o.brainDumpDismissed),n&&Array.isArray(n)&&(a=n.filter(function(e){return Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.text)&&(null==e?void 0:e.createdAt))}),d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),I(a)),e.next=3;break;case 2:e.prev=2,s=e.catch(0),console.error("Failed to load items",s);case 3:return e.prev=3,Z(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),function(){return t.apply(this,arguments)});(0,c.useEffect)(function(){"android"===d.Platform.OS&&d.UIManager.setLayoutAnimationEnabledExperimental&&d.UIManager.setLayoutAnimationEnabledExperimental(!0),Ne()},[]),(0,c.useEffect)(function(){return ye.current&&clearTimeout(ye.current),ye.current=setTimeout(function(){f.default.setJSON(f.default.STORAGE_KEYS.brainDump,A).catch(function(e){console.error("Failed to persist brain dump items:",e)})},300),A.length!==Te.current&&(_e.current&&clearTimeout(_e.current),_e.current=setTimeout(function(){y.default.updateCount(A.length),Te.current=A.length},250)),function(){ye.current&&clearTimeout(ye.current),_e.current&&clearTimeout(_e.current)}},[A]);var ke,xe=(ke=(0,l.default)(i.default.mark(function e(){var t,r,n,o,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),ce(!1),pe(!0),e.next=1,f.default.getJSON(f.default.STORAGE_KEYS.firstSuccessGuideState);case 1:if(o=t=e.sent,!(n=null!==o)){e.next=2;break}n=void 0!==t;case 2:if(!n){e.next=3;break}a=t,e.next=4;break;case 3:a={};case 4:return r=a,e.next=5,f.default.setJSON(f.default.STORAGE_KEYS.firstSuccessGuideState,F(F({},r),{},{brainDumpDismissed:!0}));case 5:case"end":return e.stop()}},e)})),function(){return ke.apply(this,arguments)}),he=function(){if(s.trim()){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut);var e={id:(0,T.generateId)(),text:s.trim(),createdAt:(new Date).toISOString(),source:"text"};I(function(t){var r=[e].concat((0,a.default)(t));return fe||ue||(p.default.track("brain_dump_first_item_added"),ce(!0)),r}),v(""),ae([]),re(null)}},ve=(0,c.useCallback)((0,l.default)(i.default.mark(function e(){var t,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("idle"===W&&(be.current=!!M),G(null),"idle"!==W){e.next=2;break}return e.next=1,g.default.startRecording();case 1:e.sent?z("recording"):G("Could not start recording. Check microphone permissions."),e.next=6;break;case 2:if("recording"!==W){e.next=6;break}return z("processing"),e.next=3,g.default.stopRecording();case 3:if(t=e.sent){e.next=4;break}return G("Recording failed."),z("idle"),e.abrupt("return");case 4:return e.next=5,b.default.transcribe(t.uri);case 5:(r=e.sent).success&&r.transcription?(be.current&&(p.default.track("brain_dump_recovery_after_error"),be.current=!1),d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),n={id:(0,T.generateId)(),text:r.transcription,createdAt:(new Date).toISOString(),source:"audio",audioPath:t.uri},I(function(e){var t=[n].concat((0,a.default)(e));return fe||ue||(p.default.track("brain_dump_first_item_added"),ce(!0)),t})):G(r.error||"Transcription failed."),z("idle");case 6:case"end":return e.stop()}},e)})),[fe,M,W,ue]);(0,c.useEffect)(function(){var e;null!==(e=r.params)&&void 0!==e&&e.autoRecord&&!ge.current&&(ge.current=!0,ve())},[ve,null===(e=r.params)||void 0===e?void 0:e.autoRecord]);var Fe,Se=(Fe=(0,l.default)(i.default.mark(function e(){var t,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return re(null),J(!0),e.prev=1,e.next=2,_.default.sortItems(A.map(function(e){return e.text}));case 2:t=e.sent,ae(t),d.AccessibilityInfo.announceForAccessibility("AI suggestions updated."),e.next=4;break;case 3:e.prev=3,r=e.catch(1),re(r instanceof Error?r.message:"AI sort is currently unavailable."),ae([]);case 4:return e.prev=4,J(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),function(){return Fe.apply(this,arguments)}),Ee=(0,c.useMemo)(function(){var e=new Map;return ie.forEach(function(t){var r,n=null!==(r=e.get(t.category))&&void 0!==r?r:[];n.push(t),e.set(t.category,n)}),E.map(function(t){var r;return{category:t,items:null!==(r=e.get(t))&&void 0!==r?r:[]}}).filter(function(e){return e.items.length>0})},[ie]);return c.default.createElement(d.SafeAreaView,{style:w.container,__self:x,__source:{fileName:h,lineNumber:371,columnNumber:5}},c.default.createElement(d.View,{style:w.centerContainer,__self:x,__source:{fileName:h,lineNumber:372,columnNumber:7}},c.default.createElement(d.View,{style:w.contentWrapper,__self:x,__source:{fileName:h,lineNumber:373,columnNumber:9}},c.default.createElement(d.View,{style:w.header,__self:x,__source:{fileName:h,lineNumber:374,columnNumber:11}},c.default.createElement(d.Text,{style:w.title,__self:x,__source:{fileName:h,lineNumber:375,columnNumber:13}},"BRAIN DUMP"),c.default.createElement(d.Text,{style:w.subtitle,__self:x,__source:{fileName:h,lineNumber:376,columnNumber:13}},"UNLOAD YOUR THOUGHTS. WE'LL KEEP THEM SAFE.")),c.default.createElement(d.View,{style:w.inputSection,__self:x,__source:{fileName:h,lineNumber:381,columnNumber:11}},c.default.createElement(d.View,{style:[w.inputWrapper,B&&w.inputWrapperFocused],__self:x,__source:{fileName:h,lineNumber:382,columnNumber:13}},c.default.createElement(d.TextInput,{style:w.input,placeholder:"WHAT'S ON YOUR MIND?",placeholderTextColor:"#666666",accessibilityLabel:"Add a brain dump item",accessibilityHint:"Type a thought and press Add",value:s,onChangeText:v,onSubmitEditing:he,onFocus:function(){return H(!0)},onBlur:function(){return H(!1)},multiline:!1,returnKeyType:"done",blurOnSubmit:!0,__self:x,__source:{fileName:h,lineNumber:388,columnNumber:15}})),c.default.createElement(N.LinearButton,{title:"ADD",onPress:he,size:"lg",style:w.addButton,__self:x,__source:{fileName:h,lineNumber:404,columnNumber:13}})),ue&&c.default.createElement(d.View,{style:w.guideBanner,__self:x,__source:{fileName:h,lineNumber:413,columnNumber:13}},c.default.createElement(d.View,{style:w.guideContent,__self:x,__source:{fileName:h,lineNumber:414,columnNumber:15}},c.default.createElement(d.Text,{style:w.guideTitle,__self:x,__source:{fileName:h,lineNumber:415,columnNumber:17}},"GREAT START."),c.default.createElement(d.Text,{style:w.guideText,__self:x,__source:{fileName:h,lineNumber:416,columnNumber:17}},"FEELING OVERWHELMED? BREAK IT DOWN IN FOG CUTTER.")),c.default.createElement(d.Pressable,{onPress:xe,style:function(e){var t=e.pressed;return[w.guideButton,t&&w.guideButtonPressed]},accessibilityRole:"button",accessibilityLabel:"Dismiss guidance",__self:x,__source:{fileName:h,lineNumber:420,columnNumber:15}},c.default.createElement(d.Text,{style:w.guideButtonText,__self:x,__source:{fileName:h,lineNumber:429,columnNumber:17}},"GOT IT"))),c.default.createElement(d.View,{style:w.recordSection,__self:x,__source:{fileName:h,lineNumber:435,columnNumber:11}},c.default.createElement(d.Pressable,{onPress:ve,disabled:"processing"===W,accessibilityRole:"button",accessibilityLabel:"recording"===W?"Stop recording":"Start recording",accessibilityHint:"Records voice and converts it to a task item",style:function(e){var t=e.pressed,r=e.hovered;return[w.recordButton,r&&w.recordButtonHovered,"recording"===W&&w.recordButtonActive,"processing"===W&&w.recordButtonProcessing,t&&w.recordButtonPressed]},__self:x,__source:{fileName:h,lineNumber:436,columnNumber:13}},"processing"===W?c.default.createElement(d.ActivityIndicator,{size:"small",color:"#FFFFFF",__self:x,__source:{fileName:h,lineNumber:462,columnNumber:17}}):c.default.createElement(d.Text,{style:w.recordIcon,__self:x,__source:{fileName:h,lineNumber:464,columnNumber:17}},"recording"===W?"‚èπÔ∏è":"üéôÔ∏è"),c.default.createElement(d.Text,{style:w.recordText,__self:x,__source:{fileName:h,lineNumber:468,columnNumber:15}},"idle"===W&&"RECORD","recording"===W&&"STOP","processing"===W&&"PROCESSING...")),"idle"===W&&c.default.createElement(d.Text,{style:w.recordHint,__self:x,__source:{fileName:h,lineNumber:475,columnNumber:15}},"AUTO-TRANSCRIBED SECURELY"),M&&c.default.createElement(d.Text,{style:w.errorText,__self:x,__source:{fileName:h,lineNumber:478,columnNumber:15}},M)),X?c.default.createElement(d.View,{style:w.loadingContainer,__self:x,__source:{fileName:h,lineNumber:483,columnNumber:13}},c.default.createElement(d.ActivityIndicator,{size:"small",color:k.Tokens.colors.brand[500],__self:x,__source:{fileName:h,lineNumber:484,columnNumber:15}}),c.default.createElement(d.Text,{style:w.loadingText,__self:x,__source:{fileName:h,lineNumber:488,columnNumber:15}},"LOADING THOUGHTS...")):A.length>0?c.default.createElement(d.View,{style:w.actionsBar,__self:x,__source:{fileName:h,lineNumber:491,columnNumber:13}},c.default.createElement(d.Text,{style:w.countText,__self:x,__source:{fileName:h,lineNumber:492,columnNumber:15}},A.length," ITEMS"),c.default.createElement(d.View,{style:w.actionsRight,__self:x,__source:{fileName:h,lineNumber:493,columnNumber:15}},c.default.createElement(d.Pressable,{onPress:Se,disabled:K,accessibilityRole:"button",accessibilityLabel:"AI sort",accessibilityHint:"Sorts and groups items using AI suggestions",style:function(e){var t=e.pressed,r=e.hovered;return[w.actionButton,r&&w.clearHovered,t&&w.clearPressed,K&&w.actionButtonDisabled]},__self:x,__source:{fileName:h,lineNumber:494,columnNumber:17}},c.default.createElement(d.Text,{style:w.aiSortText,__self:x,__source:{fileName:h,lineNumber:513,columnNumber:19}},K?"SORTING...":"AI SORT")),c.default.createElement(d.Pressable,{onPress:function(){d.Alert.alert("Clear all items?","This will remove all brain dump entries.",[{text:"Cancel",style:"cancel"},{text:"Clear",style:"destructive",onPress:function(){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),I([]),ae([]),re(null),d.AccessibilityInfo.announceForAccessibility("All items cleared.")}}],{cancelable:!0})},accessibilityRole:"button",accessibilityLabel:"Clear all items",accessibilityHint:"Opens a confirmation to remove all items",style:function(e){var t=e.pressed,r=e.hovered;return[w.actionButton,r&&w.clearHovered,t&&w.clearPressed]},__self:x,__source:{fileName:h,lineNumber:517,columnNumber:17}},c.default.createElement(d.Text,{style:w.clearText,__self:x,__source:{fileName:h,lineNumber:534,columnNumber:19}},"CLEAR ALL")))):null,te&&c.default.createElement(d.Text,{style:w.errorText,__self:x,__source:{fileName:h,lineNumber:540,columnNumber:28}},te),!X&&Ee.length>0&&c.default.createElement(d.View,{style:w.sortedSection,__self:x,__source:{fileName:h,lineNumber:543,columnNumber:13}},c.default.createElement(d.Text,{style:w.sortedTitle,__self:x,__source:{fileName:h,lineNumber:544,columnNumber:15}},"AI SUGGESTIONS"),Ee.map(function(e){var t=e.category,r=e.items;return c.default.createElement(d.View,{key:t,style:w.sortedGroup,__self:x,__source:{fileName:h,lineNumber:546,columnNumber:17}},c.default.createElement(d.Text,{style:w.sortedCategory,__self:x,__source:{fileName:h,lineNumber:547,columnNumber:19}},t.toUpperCase()),r.map(function(e,r){return c.default.createElement(d.View,{key:"".concat(t,"-").concat(r,"-").concat(e.text),style:w.sortedItemRow,__self:x,__source:{fileName:h,lineNumber:551,columnNumber:21}},c.default.createElement(d.Text,{style:w.sortedItemText,__self:x,__source:{fileName:h,lineNumber:555,columnNumber:23}},e.text),c.default.createElement(d.View,{style:[w.priorityBadge,(n=e.priority,"high"===n?w.priorityHigh:"medium"===n?w.priorityMedium:w.priorityLow)],__self:x,__source:{fileName:h,lineNumber:556,columnNumber:23}},c.default.createElement(d.Text,{style:w.priorityText,__self:x,__source:{fileName:h,lineNumber:562,columnNumber:25}},e.priority)));var n}))})),!X&&c.default.createElement(d.FlatList,{data:A,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return c.default.createElement(d.View,{style:w.item,__self:x,__source:{fileName:h,lineNumber:345,columnNumber:5}},c.default.createElement(d.Text,{style:w.itemText,__self:x,__source:{fileName:h,lineNumber:346,columnNumber:7}},t.text),c.default.createElement(d.Pressable,{onPress:function(){return e=t.id,d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),I(function(t){return t.filter(function(t){return t.id!==e})}),ae([]),void re(null);var e},accessibilityRole:"button",accessibilityLabel:"Delete brain dump item",accessibilityHint:"Removes this item from the list",style:function(e){var t=e.pressed,r=e.hovered;return[w.deleteButton,r&&w.deleteButtonHovered,t&&w.deleteButtonPressed]},hitSlop:S,__self:x,__source:{fileName:h,lineNumber:347,columnNumber:7}},c.default.createElement(d.Text,{style:w.deleteText,__self:x,__source:{fileName:h,lineNumber:365,columnNumber:9}},"√ó")))},keyboardShouldPersistTaps:"handled",keyboardDismissMode:"on-drag",initialNumToRender:10,maxToRenderPerBatch:10,updateCellsBatchingPeriod:50,windowSize:11,removeClippedSubviews:"android"===d.Platform.OS,contentContainerStyle:w.listContent,showsVerticalScrollIndicator:!1,ListEmptyComponent:c.default.createElement(d.View,{style:w.emptyState,__self:x,__source:{fileName:h,lineNumber:586,columnNumber:17}},c.default.createElement(d.Text,{style:w.emptyIcon,__self:x,__source:{fileName:h,lineNumber:587,columnNumber:19}},"‚òÅÔ∏è"),c.default.createElement(d.Text,{style:w.emptyText,__self:x,__source:{fileName:h,lineNumber:588,columnNumber:19}},"YOUR MIND IS CLEAR... FOR NOW.")),__self:x,__source:{fileName:h,lineNumber:572,columnNumber:13}}))))}},81731(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecordingService=void 0;var o,i,a,s,l=n(r(16578)),u=n(r(26007)),c=n(r(66593)),d=n(r(82857)),m=function(){try{var e;return null!==(e=r(59654).Audio)&&void 0!==e?e:null}catch(e){return null}},f=(0,d.default)(function e(){(0,c.default)(this,e),this.recording=null,this.isRecording=!1},[{key:"requestPermissions",value:(s=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m()){e.next=1;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 1:return e.next=2,t.requestPermissionsAsync();case 2:return r=e.sent,n=r.status,e.abrupt("return","granted"===n);case 3:return e.prev=3,o=e.catch(0),console.error("Permission request failed:",o),e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,null,[[0,3]])})),function(){return s.apply(this,arguments)})},{key:"startRecording",value:(a=(0,u.default)(l.default.mark(function e(){var t,r,n,o,i,a,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRecording){e.next=1;break}return console.warn("Already recording"),e.abrupt("return",!1);case 1:if(e.prev=1,n=m()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 2:return e.next=3,this.requestPermissions();case 3:if(e.sent){e.next=4;break}return console.error("Microphone permission not granted"),e.abrupt("return",!1);case 4:return e.next=5,n.setAudioModeAsync({allowsRecordingIOS:!0,playsInSilentModeIOS:!0});case 5:return o=null!==(t=null===(r=n.RecordingOptionsPresets)||void 0===r?void 0:r.HIGH_QUALITY)&&void 0!==t?t:n.Recording.OptionsPresets.HIGH_QUALITY,e.next=6,n.Recording.createAsync(o);case 6:return i=e.sent,a=i.recording,this.recording=a,this.isRecording=!0,console.log("Recording started"),e.abrupt("return",!0);case 7:return e.prev=7,s=e.catch(1),console.error("Failed to start recording:",s),e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return a.apply(this,arguments)})},{key:"stopRecording",value:(i=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recording&&this.isRecording){e.next=1;break}return console.warn("No active recording"),e.abrupt("return",null);case 1:if(e.prev=1,t=m()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 2:return e.next=3,this.recording.stopAndUnloadAsync();case 3:return e.next=4,t.setAudioModeAsync({allowsRecordingIOS:!1});case 4:return r=this.recording.getURI(),e.next=5,this.recording.getStatusAsync();case 5:if(n=e.sent,this.recording=null,this.isRecording=!1,r){e.next=6;break}return console.error("No recording URI"),e.abrupt("return",null);case 6:return console.log("Recording stopped:",r),e.abrupt("return",{uri:r,duration:n.durationMillis||0});case 7:return e.prev=7,o=e.catch(1),console.error("Failed to stop recording:",o),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return i.apply(this,arguments)})},{key:"getIsRecording",value:function(){return this.isRecording}},{key:"cancelRecording",value:(o=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recording){e.next=5;break}return e.prev=1,e.next=2,this.recording.stopAndUnloadAsync();case 2:e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:this.recording=null,this.isRecording=!1;case 5:case"end":return e.stop()}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"reset",value:function(){this.recording=null,this.isRecording=!1}}]),p=t.RecordingService=new f;t.default=p}}]);