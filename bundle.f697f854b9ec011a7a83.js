(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[222],{86222(e,t,n){var o=n(18772),a=n(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(n(16578)),r=o(n(26007)),s=o(n(58361)),i=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,o,l={__proto__:null,default:e};if(null===e||"object"!=a(e)&&"function"!=typeof e)return l;if(n=t){if(n.has(e))return n.get(e);n.set(e,l)}for(var r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(o.get||o.set)?n(l,r,o):l[r]=e[r]);return l}(e)}(n(25602)),u=n(71582),c=n(46586),m=n(8747),f=o(n(40629)),d=this,g="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\DiagnosticsScreen.tsx",b=u.StyleSheet.create({safeArea:{flex:1,backgroundColor:c.Tokens.colors.neutral.darkest},container:{flex:1,backgroundColor:c.Tokens.colors.neutral.darkest},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:c.Tokens.spacing.md,paddingVertical:c.Tokens.spacing.sm,borderBottomWidth:1,borderBottomColor:c.Tokens.colors.neutral.border},backButton:{paddingVertical:c.Tokens.spacing.xs,paddingHorizontal:c.Tokens.spacing.sm},backButtonText:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:12,fontWeight:"700",color:c.Tokens.colors.indigo.primary,letterSpacing:.5},title:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:14,fontWeight:"700",color:c.Tokens.colors.text.primary,letterSpacing:1},refreshButton:{paddingVertical:c.Tokens.spacing.xs,paddingHorizontal:c.Tokens.spacing.sm},refreshButtonText:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:16,fontWeight:"700",color:c.Tokens.colors.indigo.primary},refreshButtonTextDisabled:{color:c.Tokens.colors.text.tertiary},scrollView:{flex:1},scrollContent:{padding:c.Tokens.spacing.md},section:{marginBottom:c.Tokens.spacing.lg},sectionTitle:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:10,fontWeight:"700",color:c.Tokens.colors.text.secondary,letterSpacing:1,marginBottom:c.Tokens.spacing.sm},diagRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",paddingVertical:c.Tokens.spacing.sm,borderBottomWidth:1,borderBottomColor:c.Tokens.colors.neutral.borderSubtle},diagLabelContainer:{flexDirection:"row",alignItems:"center",flex:1},diagIndicator:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:12,marginRight:c.Tokens.spacing.xs,width:16},diagLabel:{fontFamily:c.Tokens.type.fontFamily.sans,fontSize:13,color:c.Tokens.colors.text.primary,flex:1},diagValue:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:11,textAlign:"right",maxWidth:"50%"},instructionText:{fontFamily:c.Tokens.type.fontFamily.sans,fontSize:13,color:c.Tokens.colors.text.secondary,marginBottom:c.Tokens.spacing.sm,lineHeight:20},instructionStep:{fontFamily:c.Tokens.type.fontFamily.mono,fontSize:11,color:c.Tokens.colors.text.primary,marginBottom:c.Tokens.spacing.xs,paddingLeft:c.Tokens.spacing.sm,lineHeight:18}});t.default=function(e){var t,o=e.navigation,a=(0,i.useState)([]),p=(0,s.default)(a,2),_=p[0],k=p[1],N=(0,i.useState)(!1),y=(0,s.default)(N,2),T=y[0],h=y[1],x=(t=(0,r.default)(l.default.mark(function e(){var t,o,a,r,s,i,c,d,g,b,p,_,N,y,T,x,S;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),(t=[]).push({label:"Platform",value:u.Platform.OS,status:"info"}),o=Boolean(m.config.googleWebClientId),a=Boolean(m.config.googleIosClientId),r=o||a,t.push({label:"Google Web Client ID",value:o?"Configured":"Missing",status:o?"ok":"warning"}),t.push({label:"Google iOS Client ID",value:a?"Configured":"Missing",status:a?"ok":"warning"}),"web"===u.Platform.OS){e.next=13;break}if(e.prev=1,s=r,t.push({label:"Can Attempt Auth",value:s?"Yes":"No (missing client IDs)",status:s?"ok":"error"}),e.prev=2,null==(i=n(85927))||!i.GoogleSignin){e.next=7;break}return e.prev=3,e.next=4,i.GoogleSignin.getCurrentUser();case 4:null!=(c=e.sent)&&c.scopes?(g=c.scopes.includes("https://www.googleapis.com/auth/tasks"),b=c.scopes.includes("https://www.googleapis.com/auth/calendar.events"),t.push({label:"Google Tasks Scope",value:g?"Granted":"Not granted",status:g?"ok":"warning"}),t.push({label:"Google Calendar Scope",value:b?"Granted":"Not granted",status:b?"ok":"warning"}),t.push({label:"Signed In User",value:(null===(d=c.user)||void 0===d?void 0:d.email)||"Unknown",status:"info"})):t.push({label:"Google Auth Status",value:"Not signed in",status:"warning"}),e.next=6;break;case 5:e.prev=5,e.catch(3),t.push({label:"Google Auth Status",value:"Not signed in",status:"warning"});case 6:e.next=8;break;case 7:t.push({label:"Google Sign-In Module",value:"Not available",status:"error"});case 8:e.next=10;break;case 9:e.prev=9,e.catch(2),t.push({label:"Google Sign-In Module",value:"Not installed",status:"error"});case 10:e.next=12;break;case 11:e.prev=11,S=e.catch(1),t.push({label:"Auth Check Error",value:S instanceof Error?S.message:"Unknown error",status:"error"});case 12:e.next=14;break;case 13:t.push({label:"Google Sync",value:"Not available on web",status:"info"});case 14:return e.prev=14,e.next=15,f.default.get(f.default.STORAGE_KEYS.googleTasksLastSyncAt);case 15:(p=e.sent)?(_=new Date(p),N=new Date,y=Math.floor((N.getTime()-_.getTime())/6e4),t.push({label:"Last Sync",value:"".concat(y," minutes ago (").concat(_.toLocaleString(),")"),status:y<30?"ok":"warning"})):t.push({label:"Last Sync",value:"Never",status:"info"}),e.next=17;break;case 16:e.prev=16,e.catch(14),t.push({label:"Last Sync",value:"Error reading timestamp",status:"error"});case 17:return e.prev=17,e.next=18,f.default.getJSON(f.default.STORAGE_KEYS.googleTasksExportedFingerprints);case 18:T=e.sent,x=Array.isArray(T)?T.length:0,t.push({label:"Exported Items (Dedupe Cache)",value:"".concat(x),status:"info"}),e.next=20;break;case 19:e.prev=19,e.catch(17),t.push({label:"Exported Items",value:"Error reading cache",status:"error"});case 20:k(t),h(!1);case 21:case"end":return e.stop()}},e,null,[[1,11],[2,9],[3,5],[14,16],[17,19]])})),function(){return t.apply(this,arguments)});(0,i.useEffect)(function(){x()},[]);var S=function(e){switch(e){case"ok":return c.Tokens.colors.success;case"warning":return c.Tokens.colors.warning;case"error":return c.Tokens.colors.error;default:return c.Tokens.colors.text.secondary}};return i.default.createElement(u.SafeAreaView,{style:b.safeArea,__self:d,__source:{fileName:g,lineNumber:233,columnNumber:5}},i.default.createElement(u.View,{style:b.container,__self:d,__source:{fileName:g,lineNumber:234,columnNumber:7}},i.default.createElement(u.View,{style:b.header,__self:d,__source:{fileName:g,lineNumber:236,columnNumber:9}},i.default.createElement(u.TouchableOpacity,{onPress:function(){return o.goBack()},style:b.backButton,accessibilityLabel:"Go back",accessibilityRole:"button",__self:d,__source:{fileName:g,lineNumber:237,columnNumber:11}},i.default.createElement(u.Text,{style:b.backButtonText,__self:d,__source:{fileName:g,lineNumber:243,columnNumber:13}},"← BACK")),i.default.createElement(u.Text,{style:b.title,__self:d,__source:{fileName:g,lineNumber:245,columnNumber:11}},"DIAGNOSTICS"),i.default.createElement(u.TouchableOpacity,{onPress:function(){x()},style:b.refreshButton,disabled:T,accessibilityLabel:"Refresh diagnostics",accessibilityRole:"button",__self:d,__source:{fileName:g,lineNumber:246,columnNumber:11}},i.default.createElement(u.Text,{style:[b.refreshButtonText,T&&b.refreshButtonTextDisabled],__self:d,__source:{fileName:g,lineNumber:253,columnNumber:13}},T?"...":"↻"))),i.default.createElement(u.ScrollView,{style:b.scrollView,contentContainerStyle:b.scrollContent,__self:d,__source:{fileName:g,lineNumber:265,columnNumber:9}},i.default.createElement(u.View,{style:b.section,__self:d,__source:{fileName:g,lineNumber:269,columnNumber:11}},i.default.createElement(u.Text,{style:b.sectionTitle,__self:d,__source:{fileName:g,lineNumber:270,columnNumber:13}},"SYSTEM STATUS"),_.map(function(e,t){return i.default.createElement(u.View,{key:t,style:b.diagRow,__self:d,__source:{fileName:g,lineNumber:272,columnNumber:15}},i.default.createElement(u.View,{style:b.diagLabelContainer,__self:d,__source:{fileName:g,lineNumber:273,columnNumber:17}},i.default.createElement(u.Text,{style:[b.diagIndicator,{color:S(e.status)}],__self:d,__source:{fileName:g,lineNumber:274,columnNumber:19}},function(e){switch(e){case"ok":return"✓";case"warning":return"⚠";case"error":return"✗";default:return"●"}}(e.status)),i.default.createElement(u.Text,{style:b.diagLabel,__self:d,__source:{fileName:g,lineNumber:282,columnNumber:19}},e.label)),i.default.createElement(u.Text,{style:[b.diagValue,{color:S(e.status)}],numberOfLines:2,__self:d,__source:{fileName:g,lineNumber:284,columnNumber:17}},e.value))})),i.default.createElement(u.View,{style:b.section,__self:d,__source:{fileName:g,lineNumber:297,columnNumber:11}},i.default.createElement(u.Text,{style:b.sectionTitle,__self:d,__source:{fileName:g,lineNumber:298,columnNumber:13}},"SETUP INSTRUCTIONS"),i.default.createElement(u.Text,{style:b.instructionText,__self:d,__source:{fileName:g,lineNumber:299,columnNumber:13}},"To enable Google Tasks/Calendar sync:"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:302,columnNumber:13}},"1. Create a Firebase project at console.firebase.google.com"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:305,columnNumber:13}},"2. Add Android app with package ID: com.sparkadhd"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:308,columnNumber:13}},"3. Download google-services.json to android/app/"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:311,columnNumber:13}},"4. Enable Google Tasks API in Google Cloud Console"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:314,columnNumber:13}},"5. Set REACT_APP_GOOGLE_WEB_CLIENT_ID environment variable"),i.default.createElement(u.Text,{style:b.instructionStep,__self:d,__source:{fileName:g,lineNumber:317,columnNumber:13}},"6. Rebuild the app")))))}}}]);