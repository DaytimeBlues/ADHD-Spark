(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[728],{10380(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyState=void 0;var o=n(r(25602)),a=r(71582),i=r(46586),s=r(56045),l=this,u="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\components\\ui\\EmptyState.tsx",c=(t.EmptyState=function(e){var t=e.icon,r=e.title,n=e.description,i=e.primaryActionLabel,d=e.onPrimaryAction,f=e.primaryVariant,m=void 0===f?"primary":f,p=e.style,g=e.testID;return o.default.createElement(a.View,{style:[c.container,p],testID:g,__self:l,__source:{fileName:u,lineNumber:28,columnNumber:5}},t&&o.default.createElement(a.Text,{style:c.icon,__self:l,__source:{fileName:u,lineNumber:29,columnNumber:16}},t),o.default.createElement(a.Text,{style:c.title,__self:l,__source:{fileName:u,lineNumber:30,columnNumber:7}},r),n&&o.default.createElement(a.Text,{style:c.description,__self:l,__source:{fileName:u,lineNumber:31,columnNumber:23}},n),i&&d&&o.default.createElement(a.View,{style:c.actionContainer,__self:l,__source:{fileName:u,lineNumber:33,columnNumber:9}},o.default.createElement(s.LinearButton,{title:i,onPress:d,variant:m,__self:l,__source:{fileName:u,lineNumber:34,columnNumber:11}})))},a.StyleSheet.create({container:{alignItems:"center",justifyContent:"center",padding:i.Tokens.spacing[8]},icon:{fontFamily:i.Tokens.type.fontFamily.sans,fontSize:i.Tokens.type["5xl"],marginBottom:i.Tokens.spacing[4],textAlign:"center"},title:{fontFamily:i.Tokens.type.fontFamily.mono,color:i.Tokens.colors.text.secondary,fontSize:i.Tokens.type.sm,letterSpacing:2,textAlign:"center",textTransform:"uppercase"},description:{fontFamily:i.Tokens.type.fontFamily.mono,color:i.Tokens.colors.text.tertiary,fontSize:i.Tokens.type.xs,textAlign:"center",marginTop:i.Tokens.spacing[2],maxWidth:300},actionContainer:{marginTop:i.Tokens.spacing[6]}}))},26216(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(16578)),a=n(r(26007)),i=n(r(66584)),s=r(8747),l=["task","event","reminder","thought","worry","idea"],u=["high","medium","low"];function c(e){if(!e||"object"!==(0,i.default)(e))return!1;var t=e;return"string"==typeof t.text&&l.includes(t.category)&&u.includes(t.priority)}function d(e){if(!e||"object"!==(0,i.default)(e))throw new Error("Invalid AI sort response payload.");var t=e;if(!Array.isArray(t.sorted)||!t.sorted.every(c))throw new Error("Invalid AI sort response schema.");return{sorted:t.sorted}}var f={sortItems:function(e,t){return(0,a.default)(o.default.mark(function r(){var n,a,i,l;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(n=e.map(function(e){return e.trim()}).filter(Boolean).slice(0,100)).length){r.next=1;break}return r.abrupt("return",[]);case 1:return r.next=2,fetch("".concat(s.config.apiBaseUrl,"/api/sort"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n,timezone:t})});case 2:return a=r.sent,r.next=3,a.json();case 3:if(i=r.sent,a.ok){r.next=4;break}throw l=i&&"string"==typeof i.error?i.error:"Unable to sort items right now.",new Error(l);case 4:return r.abrupt("return",d(i).sorted);case 5:case"end":return r.stop()}},r)}))()}};t.default=f},42745(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMicroSteps=t.getTaskProgressSummary=t.ensureSingleNext=t.advanceTaskProgress=void 0;var o=n(r(51750)),a=n(r(3791)),i=r(15547);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=t.ensureSingleNext=function(e){var t=!1,r=!1,n=e.map(function(e){if("in_progress"===e.status&&(r=!0),"next"===e.status){if(t)return l(l({},e),{},{status:"new"});t=!0}return e});if(!t&&!r&&n.length>0){var o=n.findIndex(function(e){return"new"===e.status}),a=o>=0?o:n.findIndex(function(e){return"done"!==e.status});a>=0&&(n[a]=l(l({},n[a]),{},{status:"next"}))}return n};t.advanceTaskProgress=function(e){if(e.completed||0===e.microSteps.length)return e;var t=(0,o.default)(e.microSteps),r=t.findIndex(function(e){return"in_progress"===e.status});if(r>=0)t[r]=l(l({},t[r]),{},{status:"done"});else{var n=t.findIndex(function(e){return"next"===e.status}),a=n>=0?n:t.findIndex(function(e){return"new"===e.status});a>=0&&(t[a]=l(l({},t[a]),{},{status:"in_progress"}))}var i=u(t),s=i.every(function(e){return"done"===e.status});return l(l({},e),{},{microSteps:i,completed:s})},t.getTaskProgressSummary=function(e){var t=e.filter(function(e){return"done"===e.status}).length;return"".concat(t,"/").concat(e.length," DONE")},t.normalizeMicroSteps=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=e.map(function(e,t){if("string"==typeof e)return{id:(0,i.generateId)(),text:e,status:0===t?"next":"new"};var r="new"===e.status||"next"===e.status||"in_progress"===e.status||"done"===e.status?e.status:0===t?"next":"new";return{id:e.id||(0,i.generateId)(),text:e.text,status:r}});return u(t)}},51728(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16578)),i=n(r(51750)),s=n(r(3791)),l=n(r(26007)),u=n(r(58361)),c=w(r(25602)),d=r(71582),f=r(20662),m=n(r(40629)),p=n(r(93400)),g=n(r(81731)),b=w(r(75128)),y=n(r(41262)),_=n(r(26216)),k=r(15547),T=r(42745),x=r(56045),h=r(10380),N=r(46586),v=this,S="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd-backup\\src\\screens\\BrainDumpScreen.tsx";function w(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(w=function(e,t){if(!t&&e&&e.__esModule)return e;var a,i,s={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return s;if(a=t?n:r){if(a.has(e))return a.get(e);a.set(e,s)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((i=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(i.get||i.set)?a(s,l,i):s[l]=e[l]);return s})(e,t)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I={top:N.Tokens.spacing[4],bottom:N.Tokens.spacing[4],left:N.Tokens.spacing[4],right:N.Tokens.spacing[4]},O=["task","event","reminder","worry","thought","idea"],R=function(e){return e.split(/\r?\n|[.;]+/).map(function(e){return e.replace(/^[-*\d.)\s]+/,"").trim()}).filter(Boolean).slice(0,50)},P=function(e){if("task"!==e.category&&"reminder"!==e.category&&"event"!==e.category)return null;var t=e.text.trim();if(!t)return null;var r=["Open this task and start with a 2-minute first step"];return e.dueDate&&r.push("Check due date: ".concat(e.dueDate)),e.start&&r.push("Schedule window starts: ".concat(e.start)),{id:(0,k.generateId)(),text:t,completed:!1,microSteps:(0,T.normalizeMicroSteps)(r)}},C=d.StyleSheet.create({container:{flex:1,backgroundColor:N.Tokens.colors.neutral.darkest},centerContainer:{flex:1,alignItems:"center"},contentWrapper:{flex:1,width:"100%",maxWidth:N.Tokens.layout.maxWidth.prose,padding:N.Tokens.spacing[4]},header:{marginBottom:N.Tokens.spacing[6],borderBottomWidth:1,borderColor:N.Tokens.colors.neutral.border,paddingBottom:N.Tokens.spacing[2],flexDirection:"row",alignItems:"center",justifyContent:"space-between"},title:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.lg,fontWeight:"700",color:N.Tokens.colors.text.primary,letterSpacing:1,textTransform:"uppercase"},headerLine:{flex:1,height:1,backgroundColor:N.Tokens.colors.neutral.dark,marginLeft:N.Tokens.spacing[4]},inputSection:{flexDirection:"row",marginBottom:N.Tokens.spacing[6],gap:N.Tokens.spacing[3],alignItems:"center"},inputWrapper:A({flex:1,backgroundColor:N.Tokens.colors.neutral.darker,borderRadius:N.Tokens.radii.none,borderWidth:1,borderColor:N.Tokens.colors.neutral.border,minHeight:48,justifyContent:"center"},d.Platform.select({web:{transition:"border-color 0.2s ease"}})),inputWrapperFocused:{borderColor:N.Tokens.colors.text.primary},input:A({paddingHorizontal:N.Tokens.spacing[3],color:N.Tokens.colors.text.primary,fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.sm,minHeight:48,textAlignVertical:"center",paddingVertical:0},d.Platform.select({web:{outlineStyle:"none"}})),addButton:{minHeight:48,width:60,justifyContent:"center",alignItems:"center",borderRadius:N.Tokens.radii.none},actionsBar:{flexDirection:"row",justifyContent:"space-between",marginBottom:N.Tokens.spacing[4],paddingHorizontal:N.Tokens.spacing[2],alignItems:"center"},actionsRight:{flexDirection:"row",alignItems:"center",gap:N.Tokens.spacing[4]},actionButton:A({paddingVertical:4,paddingHorizontal:8,borderRadius:N.Tokens.radii.none,borderWidth:1,borderColor:N.Tokens.colors.neutral.border},d.Platform.select({web:{transition:"all 0.2s ease"}})),actionButtonDisabled:{opacity:.5,pointerEvents:"none"},clearHovered:{backgroundColor:N.Tokens.colors.neutral.dark},clearPressed:{opacity:.7},countText:{fontFamily:N.Tokens.type.fontFamily.mono,color:N.Tokens.colors.text.secondary,fontSize:N.Tokens.type.xs,fontWeight:"700",letterSpacing:1},clearText:{fontFamily:N.Tokens.type.fontFamily.mono,color:N.Tokens.colors.brand[500],fontSize:N.Tokens.type.xs,fontWeight:"700",letterSpacing:1},aiSortText:{fontFamily:N.Tokens.type.fontFamily.mono,color:N.Tokens.colors.text.primary,fontSize:N.Tokens.type.xs,fontWeight:"700",letterSpacing:1},sortedSection:{marginTop:N.Tokens.spacing[4],marginBottom:N.Tokens.spacing[6],padding:N.Tokens.spacing[4],backgroundColor:N.Tokens.colors.neutral.darker,borderRadius:N.Tokens.radii.none,borderWidth:1,borderStyle:"dashed",borderColor:N.Tokens.colors.neutral.border},sortedTitle:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,fontWeight:"700",color:N.Tokens.colors.text.primary,marginBottom:N.Tokens.spacing[4],letterSpacing:1,textTransform:"uppercase"},sortedGroup:{marginBottom:N.Tokens.spacing[4]},sortedCategory:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,fontWeight:"700",color:N.Tokens.colors.text.secondary,textTransform:"uppercase",letterSpacing:1,marginBottom:N.Tokens.spacing[2],opacity:.9},sortedItemRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",paddingVertical:4,marginBottom:0},sortedItemText:{flex:1,fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,color:N.Tokens.colors.text.secondary,lineHeight:1.5*N.Tokens.type.sm,marginRight:N.Tokens.spacing[3]},priorityBadge:{paddingHorizontal:6,paddingVertical:0,borderRadius:N.Tokens.radii.none,minWidth:40,alignItems:"center",borderWidth:1,borderColor:N.Tokens.colors.neutral.border},priorityText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xxs,fontWeight:"700",textTransform:"uppercase",color:N.Tokens.colors.text.primary},priorityHigh:{backgroundColor:N.Tokens.colors.brand[500],borderColor:N.Tokens.colors.brand[500]},priorityMedium:{backgroundColor:N.Tokens.colors.neutral.border},priorityLow:{backgroundColor:N.Tokens.colors.neutral.dark},listContent:{paddingBottom:120},item:A({backgroundColor:N.Tokens.colors.neutral.darkest,borderRadius:N.Tokens.radii.none,paddingHorizontal:N.Tokens.spacing[4],paddingVertical:N.Tokens.spacing[3],marginBottom:-1,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderWidth:1,borderColor:N.Tokens.colors.neutral.border,minHeight:48},d.Platform.select({web:{transition:"all 0.2s ease"}})),itemText:{flex:1,color:N.Tokens.colors.text.primary,fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.sm,lineHeight:1.2*N.Tokens.type.base,marginRight:N.Tokens.spacing[4]},deleteButton:A({padding:0,borderRadius:N.Tokens.radii.none,width:32,height:32,alignItems:"center",justifyContent:"center"},d.Platform.select({web:{transition:"all 0.2s ease"}})),deleteButtonHovered:{backgroundColor:N.Tokens.colors.neutral.dark},deleteButtonPressed:{backgroundColor:N.Tokens.colors.neutral.border},deleteText:{color:N.Tokens.colors.text.secondary,fontSize:N.Tokens.type.lg,fontWeight:"300",marginTop:-2},emptyState:{marginTop:N.Tokens.spacing[12],opacity:.3},recordSection:{alignItems:"center",marginBottom:N.Tokens.spacing[6]},recordButton:A({flexDirection:"row",alignItems:"center",backgroundColor:N.Tokens.colors.neutral.darkest,paddingHorizontal:N.Tokens.spacing[4],paddingVertical:N.Tokens.spacing[2],borderRadius:N.Tokens.radii.none,borderWidth:1,borderColor:N.Tokens.colors.neutral.border,minWidth:140,minHeight:48,justifyContent:"center"},d.Platform.select({web:{transition:"all 0.2s ease",cursor:"pointer"}})),recordButtonHovered:{borderColor:N.Tokens.colors.text.primary},recordButtonActive:{backgroundColor:N.Tokens.colors.brand[500],borderColor:N.Tokens.colors.brand[500]},recordButtonProcessing:{opacity:.5,backgroundColor:N.Tokens.colors.neutral.dark},recordButtonPressed:{opacity:.8},recordIcon:{fontSize:N.Tokens.type.base,marginRight:N.Tokens.spacing[2],color:N.Tokens.colors.text.primary},recordText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,fontWeight:"700",color:N.Tokens.colors.text.primary,letterSpacing:1},errorText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,color:N.Tokens.colors.brand[500],marginTop:N.Tokens.spacing[2],textAlign:"center"},loadingContainer:{padding:N.Tokens.spacing[8],alignItems:"center",gap:N.Tokens.spacing[4]},guideBanner:{backgroundColor:N.Tokens.colors.neutral.dark,borderWidth:1,borderColor:N.Tokens.colors.brand[500],padding:N.Tokens.spacing[3],marginBottom:N.Tokens.spacing[6],flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:N.Tokens.spacing[4]},guideContent:{flex:1},guideTitle:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,fontWeight:"700",color:N.Tokens.colors.brand[500],marginBottom:N.Tokens.spacing[1],letterSpacing:1},guideText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xs,color:N.Tokens.colors.text.primary},guideButton:{paddingVertical:4,paddingHorizontal:8,borderWidth:1,borderColor:N.Tokens.colors.neutral.border,backgroundColor:N.Tokens.colors.neutral.darkest},guideButtonPressed:{backgroundColor:N.Tokens.colors.neutral.darker},guideButtonText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.xxs,fontWeight:"700",color:N.Tokens.colors.text.primary,textTransform:"uppercase"},loadingText:{fontFamily:N.Tokens.type.fontFamily.mono,fontSize:N.Tokens.type.sm,color:N.Tokens.colors.text.secondary,letterSpacing:1,textTransform:"uppercase"}});t.default=function(){var e,t,r=(0,f.useRoute)(),n=(0,c.useState)(""),o=(0,u.default)(n,2),s=o[0],T=o[1],w=(0,c.useState)([]),E=(0,u.default)(w,2),B=E[0],F=E[1],D=(0,c.useState)(!1),j=(0,u.default)(D,2),L=j[0],z=j[1],W=(0,c.useState)("idle"),H=(0,u.default)(W,2),V=H[0],M=H[1],G=(0,c.useState)(null),U=(0,u.default)(G,2),Y=U[0],K=U[1],J=(0,c.useState)(!1),q=(0,u.default)(J,2),Q=q[0],X=q[1],Z=(0,c.useState)(!0),$=(0,u.default)(Z,2),ee=$[0],te=$[1],re=(0,c.useState)(null),ne=(0,u.default)(re,2),oe=ne[0],ae=ne[1],ie=(0,c.useState)([]),se=(0,u.default)(ie,2),le=se[0],ue=se[1],ce=(0,c.useState)(!1),de=(0,u.default)(ce,2),fe=de[0],me=de[1],pe=(0,c.useState)(!0),ge=(0,u.default)(pe,2),be=ge[0],ye=ge[1],_e=(0,c.useRef)(!1),ke=(0,c.useRef)(!1),Te=(0,c.useRef)(null),xe=(0,c.useRef)(null),he=(0,c.useRef)(0),Ne=(0,c.useRef)(null),ve=(t=(0,l.default)(a.default.mark(function e(){var t,r,n,o,i,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([m.default.getJSON(m.default.STORAGE_KEYS.brainDump),m.default.getJSON(m.default.STORAGE_KEYS.firstSuccessGuideState)]);case 1:t=e.sent,r=(0,u.default)(t,2),n=r[0],o=r[1],ye(!!o&&!!o.brainDumpDismissed),n&&Array.isArray(n)&&(i=n.filter(function(e){return Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.text)&&(null==e?void 0:e.createdAt))}),d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),F(i)),e.next=3;break;case 2:e.prev=2,s=e.catch(0),console.error("Failed to load items",s);case 3:return e.prev=3,te(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),function(){return t.apply(this,arguments)});(0,c.useEffect)(function(){"android"===d.Platform.OS&&d.UIManager.setLayoutAnimationEnabledExperimental&&d.UIManager.setLayoutAnimationEnabledExperimental(!0),ve()},[]),(0,c.useEffect)(function(){return Te.current&&clearTimeout(Te.current),Te.current=setTimeout(function(){m.default.setJSON(m.default.STORAGE_KEYS.brainDump,B).catch(function(e){console.error("Failed to persist brain dump items:",e)})},300),B.length!==he.current&&(xe.current&&clearTimeout(xe.current),xe.current=setTimeout(function(){y.default.updateCount(B.length),he.current=B.length},250)),function(){Te.current&&clearTimeout(Te.current),xe.current&&clearTimeout(xe.current)}},[B]);var Se,we,Ee,Ae=(Se=(0,l.default)(a.default.mark(function e(){var t,r,n,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),me(!1),ye(!0),e.next=1,m.default.getJSON(m.default.STORAGE_KEYS.firstSuccessGuideState);case 1:if(o=t=e.sent,!(n=null!==o)){e.next=2;break}n=void 0!==t;case 2:if(!n){e.next=3;break}i=t,e.next=4;break;case 3:i={};case 4:return r=i,e.next=5,m.default.setJSON(m.default.STORAGE_KEYS.firstSuccessGuideState,A(A({},r),{},{brainDumpDismissed:!0}));case 5:case"end":return e.stop()}},e)})),function(){return Se.apply(this,arguments)}),Ie=function(){if(s.trim()){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut);var e={id:(0,k.generateId)(),text:s.trim(),createdAt:(new Date).toISOString(),source:"text"};F(function(t){var r=[e].concat((0,i.default)(t));return be||fe||(p.default.track("brain_dump_first_item_added"),me(!0)),r}),T(""),ue([]),ae(null)}},Oe=(0,c.useCallback)((we=(0,l.default)(a.default.mark(function e(t){var r,n,o,s,l,u,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,m.default.getJSON(m.default.STORAGE_KEYS.tasks);case 1:if(u=r=e.sent,!(l=null!==u)){e.next=2;break}l=void 0!==r;case 2:if(!l){e.next=3;break}c=r,e.next=4;break;case 3:c=[];case 4:if(n=c,o=new Set(n.map(function(e){return e.text.trim().toLowerCase()})),s=[],t.forEach(function(e){var t=P(e);if(t){var r=t.text.trim().toLowerCase();o.has(r)||(o.add(r),s.push(t))}}),0!==s.length){e.next=5;break}return e.abrupt("return",0);case 5:return e.next=6,m.default.setJSON(m.default.STORAGE_KEYS.tasks,[].concat((0,i.default)(n),s));case 6:return e.abrupt("return",s.length);case 7:case"end":return e.stop()}},e)})),function(e){return we.apply(this,arguments)}),[]),Re=(0,c.useCallback)((Ee=(0,l.default)(a.default.mark(function e(t){var r,n,o,i,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=1;break}return e.abrupt("return");case 1:return e.next=2,_.default.sortItems(t);case 2:return r=e.sent,ue(r),e.next=3,Promise.all([Oe(r),b.GoogleTasksSyncService.syncSortedItemsToGoogle(r)]);case 3:n=e.sent,o=(0,u.default)(n,2),i=o[0],(s=o[1]).authRequired?ae(s.errorMessage||"Google sign-in required to sync Tasks and Calendar exports."):s.errorMessage&&ae(s.errorMessage),(i>0||s.createdTasks>0||s.createdEvents>0)&&(ae(null),d.AccessibilityInfo.announceForAccessibility("Tasks synced and suggestions saved."));case 4:case"end":return e.stop()}},e)})),function(e){return Ee.apply(this,arguments)}),[Oe]),Pe=(0,c.useCallback)((0,l.default)(a.default.mark(function e(){var t,r,n,o,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("idle"===V&&(ke.current=!!Y),K(null),"idle"!==V){e.next=2;break}return e.next=1,g.default.startRecording();case 1:e.sent?M("recording"):K("Could not start recording. Check microphone permissions."),e.next=12;break;case 2:if("recording"!==V){e.next=12;break}return M("processing"),e.next=3,g.default.stopRecording();case 3:if(t=e.sent){e.next=4;break}return K("Recording failed."),M("idle"),e.abrupt("return");case 4:return e.next=5,b.default.transcribe(t.uri);case 5:if(!(r=e.sent).success||!r.transcription){e.next=10;break}if(ke.current&&(p.default.track("brain_dump_recovery_after_error"),ke.current=!1),d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),n={id:(0,k.generateId)(),text:r.transcription,createdAt:(new Date).toISOString(),source:"audio",audioPath:t.uri},F(function(e){var t=[n].concat((0,i.default)(e));return be||fe||(p.default.track("brain_dump_first_item_added"),me(!0)),t}),!((o=R(r.transcription)).length>0)){e.next=9;break}return e.prev=6,e.next=7,Re(o);case 7:ae(null),e.next=9;break;case 8:e.prev=8,l=e.catch(6),s=l instanceof Error?l.message:"Failed to sync transcription suggestions.",ae(s);case 9:e.next=11;break;case 10:K(r.error||"Transcription failed.");case 11:M("idle");case 12:case"end":return e.stop()}},e,null,[[6,8]])})),[be,Y,V,Re,fe]);(0,c.useEffect)(function(){var e;null!==(e=r.params)&&void 0!==e&&e.autoRecord&&!_e.current&&(_e.current=!0,Pe())},[Pe,null===(e=r.params)||void 0===e?void 0:e.autoRecord]);var Ce,Be=(Ce=(0,l.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ae(null),X(!0),e.prev=1,e.next=2,Re(B.map(function(e){return e.text}));case 2:d.AccessibilityInfo.announceForAccessibility("AI suggestions updated."),e.next=4;break;case 3:e.prev=3,t=e.catch(1),ae(t instanceof Error?t.message:"AI sort is currently unavailable."),ue([]);case 4:return e.prev=4,X(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),function(){return Ce.apply(this,arguments)}),Fe=(0,c.useMemo)(function(){var e=new Map;return le.forEach(function(t){var r,n=null!==(r=e.get(t.category))&&void 0!==r?r:[];n.push(t),e.set(t.category,n)}),O.map(function(t){var r;return{category:t,items:null!==(r=e.get(t))&&void 0!==r?r:[]}}).filter(function(e){return e.items.length>0})},[le]);return c.default.createElement(d.SafeAreaView,{style:C.container,__self:v,__source:{fileName:S,lineNumber:519,columnNumber:5}},c.default.createElement(d.View,{style:C.centerContainer,__self:v,__source:{fileName:S,lineNumber:520,columnNumber:7}},c.default.createElement(d.View,{style:C.contentWrapper,__self:v,__source:{fileName:S,lineNumber:521,columnNumber:9}},c.default.createElement(d.View,{style:C.header,__self:v,__source:{fileName:S,lineNumber:522,columnNumber:11}},c.default.createElement(d.Text,{style:C.title,__self:v,__source:{fileName:S,lineNumber:523,columnNumber:13}},"BRAIN_DUMP"),c.default.createElement(d.View,{style:C.headerLine,__self:v,__source:{fileName:S,lineNumber:524,columnNumber:13}})),c.default.createElement(d.View,{style:C.inputSection,__self:v,__source:{fileName:S,lineNumber:527,columnNumber:11}},c.default.createElement(d.View,{style:[C.inputWrapper,L&&C.inputWrapperFocused],__self:v,__source:{fileName:S,lineNumber:528,columnNumber:13}},c.default.createElement(d.TextInput,{ref:Ne,style:C.input,placeholder:"> INPUT_DATA...",placeholderTextColor:N.Tokens.colors.text.placeholder,accessibilityLabel:"Add a brain dump item",accessibilityHint:"Type a thought and press Add",value:s,onChangeText:T,onSubmitEditing:Ie,onFocus:function(){return z(!0)},onBlur:function(){return z(!1)},multiline:!1,returnKeyType:"done",blurOnSubmit:!0,__self:v,__source:{fileName:S,lineNumber:534,columnNumber:15}})),c.default.createElement(x.LinearButton,{title:"+",onPress:Ie,size:"lg",style:C.addButton,__self:v,__source:{fileName:S,lineNumber:551,columnNumber:13}})),fe&&c.default.createElement(d.View,{style:C.guideBanner,__self:v,__source:{fileName:S,lineNumber:560,columnNumber:13}},c.default.createElement(d.View,{style:C.guideContent,__self:v,__source:{fileName:S,lineNumber:561,columnNumber:15}},c.default.createElement(d.Text,{style:C.guideTitle,__self:v,__source:{fileName:S,lineNumber:562,columnNumber:17}},"DATA_CAPTURED."),c.default.createElement(d.Text,{style:C.guideText,__self:v,__source:{fileName:S,lineNumber:563,columnNumber:17}},"NEXT: PROCESS_IN_FOG_CUTTER.")),c.default.createElement(d.Pressable,{onPress:Ae,style:function(e){var t=e.pressed;return[C.guideButton,t&&C.guideButtonPressed]},accessibilityRole:"button",accessibilityLabel:"Dismiss guidance",__self:v,__source:{fileName:S,lineNumber:567,columnNumber:15}},c.default.createElement(d.Text,{style:C.guideButtonText,__self:v,__source:{fileName:S,lineNumber:576,columnNumber:17}},"ACK"))),c.default.createElement(d.View,{style:C.recordSection,__self:v,__source:{fileName:S,lineNumber:582,columnNumber:11}},c.default.createElement(d.Pressable,{onPress:Pe,disabled:"processing"===V,accessibilityRole:"button",accessibilityLabel:"recording"===V?"Stop recording":"Start recording",accessibilityHint:"Records voice and converts it to a task item",style:function(e){var t=e.pressed,r=e.hovered;return[C.recordButton,r&&C.recordButtonHovered,"recording"===V&&C.recordButtonActive,"processing"===V&&C.recordButtonProcessing,t&&C.recordButtonPressed]},__self:v,__source:{fileName:S,lineNumber:583,columnNumber:13}},"processing"===V?c.default.createElement(d.ActivityIndicator,{size:"small",color:N.Tokens.colors.text.primary,__self:v,__source:{fileName:S,lineNumber:609,columnNumber:17}}):c.default.createElement(d.Text,{style:C.recordIcon,__self:v,__source:{fileName:S,lineNumber:614,columnNumber:17}},"recording"===V?"‚èπÔ∏è":"üéôÔ∏è"),c.default.createElement(d.Text,{style:C.recordText,__self:v,__source:{fileName:S,lineNumber:618,columnNumber:15}},"idle"===V&&"VOICE_INPUT","recording"===V&&"STOP_REC","processing"===V&&"PROCESSING...")),Y&&c.default.createElement(d.Text,{style:C.errorText,__self:v,__source:{fileName:S,lineNumber:625,columnNumber:15}},Y)),ee?c.default.createElement(d.View,{style:C.loadingContainer,__self:v,__source:{fileName:S,lineNumber:630,columnNumber:13}},c.default.createElement(d.ActivityIndicator,{size:"small",color:N.Tokens.colors.brand[500],__self:v,__source:{fileName:S,lineNumber:631,columnNumber:15}}),c.default.createElement(d.Text,{style:C.loadingText,__self:v,__source:{fileName:S,lineNumber:635,columnNumber:15}},"LOADING...")):B.length>0?c.default.createElement(d.View,{style:C.actionsBar,__self:v,__source:{fileName:S,lineNumber:638,columnNumber:13}},c.default.createElement(d.Text,{style:C.countText,__self:v,__source:{fileName:S,lineNumber:639,columnNumber:15}},B.length," ITEMS"),c.default.createElement(d.View,{style:C.actionsRight,__self:v,__source:{fileName:S,lineNumber:640,columnNumber:15}},c.default.createElement(d.Pressable,{onPress:Be,disabled:Q,accessibilityRole:"button",accessibilityLabel:"AI sort",accessibilityHint:"Sorts and groups items using AI suggestions",style:function(e){var t=e.pressed,r=e.hovered;return[C.actionButton,r&&C.clearHovered,t&&C.clearPressed,Q&&C.actionButtonDisabled]},__self:v,__source:{fileName:S,lineNumber:641,columnNumber:17}},c.default.createElement(d.Text,{style:C.aiSortText,__self:v,__source:{fileName:S,lineNumber:660,columnNumber:19}},Q?"SORTING...":"AI_SORT")),c.default.createElement(d.Pressable,{onPress:function(){d.Alert.alert("CLEAR_DATA?","IRREVERSIBLE_ACTION.",[{text:"ABORT",style:"cancel"},{text:"CONFIRM",style:"destructive",onPress:function(){d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),F([]),ue([]),ae(null),d.AccessibilityInfo.announceForAccessibility("All items cleared.")}}],{cancelable:!0})},accessibilityRole:"button",accessibilityLabel:"Clear all items",accessibilityHint:"Opens a confirmation to remove all items",style:function(e){var t=e.pressed,r=e.hovered;return[C.actionButton,r&&C.clearHovered,t&&C.clearPressed]},__self:v,__source:{fileName:S,lineNumber:664,columnNumber:17}},c.default.createElement(d.Text,{style:C.clearText,__self:v,__source:{fileName:S,lineNumber:681,columnNumber:19}},"CLEAR")))):null,oe&&c.default.createElement(d.Text,{style:C.errorText,__self:v,__source:{fileName:S,lineNumber:687,columnNumber:28}},oe),!ee&&Fe.length>0&&c.default.createElement(d.View,{style:C.sortedSection,__self:v,__source:{fileName:S,lineNumber:690,columnNumber:13}},c.default.createElement(d.Text,{style:C.sortedTitle,__self:v,__source:{fileName:S,lineNumber:691,columnNumber:15}},"AI_ANALYSIS"),Fe.map(function(e){var t=e.category,r=e.items;return c.default.createElement(d.View,{key:t,style:C.sortedGroup,__self:v,__source:{fileName:S,lineNumber:693,columnNumber:17}},c.default.createElement(d.Text,{style:C.sortedCategory,__self:v,__source:{fileName:S,lineNumber:694,columnNumber:19}},t.toUpperCase()),r.map(function(e,r){return c.default.createElement(d.View,{key:"".concat(t,"-").concat(r,"-").concat(e.text),style:C.sortedItemRow,__self:v,__source:{fileName:S,lineNumber:698,columnNumber:21}},c.default.createElement(d.Text,{style:C.sortedItemText,__self:v,__source:{fileName:S,lineNumber:702,columnNumber:23}},e.text),c.default.createElement(d.View,{style:[C.priorityBadge,(n=e.priority,"high"===n?C.priorityHigh:"medium"===n?C.priorityMedium:C.priorityLow)],__self:v,__source:{fileName:S,lineNumber:703,columnNumber:23}},c.default.createElement(d.Text,{style:C.priorityText,__self:v,__source:{fileName:S,lineNumber:709,columnNumber:25}},e.priority)));var n}))})),!ee&&c.default.createElement(d.FlatList,{data:B,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return c.default.createElement(d.View,{style:C.item,__self:v,__source:{fileName:S,lineNumber:493,columnNumber:5}},c.default.createElement(d.Text,{style:C.itemText,__self:v,__source:{fileName:S,lineNumber:494,columnNumber:7}},t.text),c.default.createElement(d.Pressable,{onPress:function(){return e=t.id,d.LayoutAnimation.configureNext(d.LayoutAnimation.Presets.easeInEaseOut),F(function(t){return t.filter(function(t){return t.id!==e})}),ue([]),void ae(null);var e},accessibilityRole:"button",accessibilityLabel:"Delete brain dump item",accessibilityHint:"Removes this item from the list",style:function(e){var t=e.pressed,r=e.hovered;return[C.deleteButton,r&&C.deleteButtonHovered,t&&C.deleteButtonPressed]},hitSlop:I,__self:v,__source:{fileName:S,lineNumber:495,columnNumber:7}},c.default.createElement(d.Text,{style:C.deleteText,__self:v,__source:{fileName:S,lineNumber:513,columnNumber:9}},"√ó")))},keyboardShouldPersistTaps:"handled",keyboardDismissMode:"on-drag",initialNumToRender:10,maxToRenderPerBatch:10,updateCellsBatchingPeriod:50,windowSize:11,removeClippedSubviews:"android"===d.Platform.OS,contentContainerStyle:C.listContent,showsVerticalScrollIndicator:!1,ListEmptyComponent:c.default.createElement(h.EmptyState,{icon:"‚òÅÔ∏è",title:"NULL_DATA.",primaryActionLabel:"ADD FIRST ITEM",onPrimaryAction:function(){var e;s.trim()?Ie():null===(e=Ne.current)||void 0===e||e.focus()},style:C.emptyState,__self:v,__source:{fileName:S,lineNumber:733,columnNumber:17}}),__self:v,__source:{fileName:S,lineNumber:719,columnNumber:13}}))))}},81731(e,t,r){var n=r(18772);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecordingService=void 0;var o,a,i,s,l=n(r(16578)),u=n(r(26007)),c=n(r(66593)),d=n(r(82857)),f=function(){try{var e;return null!==(e=r(59654).Audio)&&void 0!==e?e:null}catch(e){return null}},m=(0,d.default)(function e(){(0,c.default)(this,e),this.recording=null,this.isRecording=!1},[{key:"requestPermissions",value:(s=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=f()){e.next=1;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 1:return e.next=2,t.requestPermissionsAsync();case 2:return r=e.sent,n=r.status,e.abrupt("return","granted"===n);case 3:return e.prev=3,o=e.catch(0),console.error("Permission request failed:",o),e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,null,[[0,3]])})),function(){return s.apply(this,arguments)})},{key:"startRecording",value:(i=(0,u.default)(l.default.mark(function e(){var t,r,n,o,a,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRecording){e.next=1;break}return console.warn("Already recording"),e.abrupt("return",!1);case 1:if(e.prev=1,n=f()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),e.abrupt("return",!1);case 2:return e.next=3,this.requestPermissions();case 3:if(e.sent){e.next=4;break}return console.error("Microphone permission not granted"),e.abrupt("return",!1);case 4:return e.next=5,n.setAudioModeAsync({allowsRecordingIOS:!0,playsInSilentModeIOS:!0});case 5:return o=null!==(t=null===(r=n.RecordingOptionsPresets)||void 0===r?void 0:r.HIGH_QUALITY)&&void 0!==t?t:n.Recording.OptionsPresets.HIGH_QUALITY,e.next=6,n.Recording.createAsync(o);case 6:return a=e.sent,i=a.recording,this.recording=i,this.isRecording=!0,console.log("Recording started"),e.abrupt("return",!0);case 7:return e.prev=7,s=e.catch(1),console.error("Failed to start recording:",s),e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return i.apply(this,arguments)})},{key:"stopRecording",value:(a=(0,u.default)(l.default.mark(function e(){var t,r,n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recording&&this.isRecording){e.next=1;break}return console.warn("No active recording"),e.abrupt("return",null);case 1:if(e.prev=1,t=f()){e.next=2;break}return console.warn("Recording unavailable: expo-av is not installed"),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 2:return e.next=3,this.recording.stopAndUnloadAsync();case 3:return e.next=4,t.setAudioModeAsync({allowsRecordingIOS:!1});case 4:return r=this.recording.getURI(),e.next=5,this.recording.getStatusAsync();case 5:if(n=e.sent,this.recording=null,this.isRecording=!1,r){e.next=6;break}return console.error("No recording URI"),e.abrupt("return",null);case 6:return console.log("Recording stopped:",r),e.abrupt("return",{uri:r,duration:n.durationMillis||0});case 7:return e.prev=7,o=e.catch(1),console.error("Failed to stop recording:",o),this.recording=null,this.isRecording=!1,e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this,[[1,7]])})),function(){return a.apply(this,arguments)})},{key:"getIsRecording",value:function(){return this.isRecording}},{key:"cancelRecording",value:(o=(0,u.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recording){e.next=5;break}return e.prev=1,e.next=2,this.recording.stopAndUnloadAsync();case 2:e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:this.recording=null,this.isRecording=!1;case 5:case"end":return e.stop()}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"reset",value:function(){this.recording=null,this.isRecording=!1}}]),p=t.RecordingService=new m;t.default=p}}]);