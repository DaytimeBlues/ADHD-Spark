(self.webpackChunkspark_adhd_rn=self.webpackChunkspark_adhd_rn||[]).push([[469],{91469(e,t,r){var n=r(18772),o=r(66584);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(r(16578)),a=n(r(3791)),l=n(r(26007)),i=n(r(58361)),u=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var r,n,s={__proto__:null,default:e};if(null===e||"object"!=o(e)&&"function"!=typeof e)return s;if(r=t){if(r.has(e))return r.get(e);r.set(e,s)}for(var a in e)"default"!==a&&{}.hasOwnProperty.call(e,a)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(n.get||n.set)?r(s,a,n):s[a]=e[a]);return s}(e)}(r(25602)),c=r(71582),m=n(r(98759)),f=n(r(40629)),d=n(r(31771)),p=r(56045),b=r(46586),_=r(59354),y=r(18878),g=this,T="C:\\Users\\Steve\\OneDrive\\Desktop\\Github Repos\\spark-adhd\\src\\screens\\PomodoroScreen.tsx";function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=1500;t.default=function(){var e=(0,_.useTheme)().isCosmic,t=(0,u.useState)(!0),r=(0,i.default)(t,2),n=r[0],o=r[1],a=(0,u.useState)(0),k=(0,i.default)(a,2),E=k[0],S=k[1],C=(0,u.useRef)(n),x=(0,u.useRef)(null),F=(0,d.default)({initialTime:h,onComplete:function(){C.current?(S(function(e){return e+1}),o(!1),C.current=!1,m.default.playCompletionSound(),W(300)):(o(!0),C.current=!0,m.default.playNotificationSound(),W(h)),setTimeout(function(){return v()},0)}}),w=F.timeLeft,O=F.isRunning,B=F.formattedTime,v=F.start,P=F.pause,R=F.reset,W=F.setTime;(0,u.useEffect)(function(){C.current=n},[n]),(0,u.useEffect)(function(){var e,t=(e=(0,l.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,f.default.getJSON(f.default.STORAGE_KEYS.pomodoroState);case 1:if(t=e.sent){e.next=2;break}return e.abrupt("return");case 2:"boolean"==typeof t.isWorking&&o(t.isWorking),"number"==typeof t.timeLeft&&W(t.timeLeft),"number"==typeof t.sessions&&S(t.sessions);case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});t()},[W]),(0,u.useEffect)(function(){return x.current&&clearTimeout(x.current),x.current=setTimeout(function(){f.default.setJSON(f.default.STORAGE_KEYS.pomodoroState,{isWorking:n,timeLeft:w,sessions:E})},5e3),function(){x.current&&clearTimeout(x.current)}},[n,w,E]);var j=function(){v()},D=function(){P()},z=function(){R(),o(!0),C.current=!0,W(h)},I=function(e){return c.StyleSheet.create({container:{flex:1,backgroundColor:"transparent"},content:{flex:1,padding:b.Tokens.spacing[6],alignItems:"center",justifyContent:"center",width:"100%",maxWidth:b.Tokens.layout.maxWidth.prose},header:{alignItems:"center",marginBottom:b.Tokens.spacing[10]},title:{fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type["4xl"],fontWeight:"800",color:e?"#EEF2FF":b.Tokens.colors.text.primary,marginBottom:b.Tokens.spacing[2],letterSpacing:2,textAlign:"center"},subtitle:N({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.base,color:e?"#B9C2D9":b.Tokens.colors.text.tertiary,textAlign:"center",letterSpacing:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),rationaleCard:{backgroundColor:e?"#111A33":b.Tokens.colors.neutral.darker,borderWidth:1,borderColor:e?"rgba(42, 53, 82, 0.3)":b.Tokens.colors.neutral.borderSubtle,padding:b.Tokens.spacing[4],marginBottom:b.Tokens.spacing[6],borderRadius:e?12:0},rationaleTitle:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.xs,fontWeight:"700",color:e?"#8B5CF6":b.Tokens.colors.brand[500],letterSpacing:1,marginBottom:b.Tokens.spacing[2],textTransform:"uppercase"},rationaleText:{fontFamily:b.Tokens.type.fontFamily.body,fontSize:b.Tokens.type.sm,color:e?"#B9C2D9":b.Tokens.colors.text.secondary,lineHeight:22,flexWrap:"wrap"},sessionCounter:{flexDirection:"row",alignItems:"center",marginBottom:b.Tokens.spacing[8],backgroundColor:e?"#111A33":b.Tokens.colors.neutral.darker,paddingHorizontal:b.Tokens.spacing[4],paddingVertical:b.Tokens.spacing[2],borderRadius:e?8:b.Tokens.radii.none,borderWidth:1,borderColor:e?"rgba(42, 53, 82, 0.3)":b.Tokens.colors.neutral.borderSubtle,gap:b.Tokens.spacing[3]},sessionBadge:{backgroundColor:e?"#0B1022":b.Tokens.colors.brand[900],width:28,height:28,borderRadius:e?6:0,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:e?"#8B5CF6":b.Tokens.colors.brand[700]},sessionCount:{fontFamily:b.Tokens.type.fontFamily.mono,color:e?"#EEF2FF":b.Tokens.colors.brand[100],fontSize:b.Tokens.type.sm,fontWeight:"700"},sessionLabel:{fontFamily:b.Tokens.type.fontFamily.sans,color:e?"#B9C2D9":b.Tokens.colors.text.tertiary,fontSize:b.Tokens.type.sm,letterSpacing:.5},timerCard:{alignItems:"center",justifyContent:"center",marginBottom:b.Tokens.spacing[12],width:280,height:280,position:"relative",borderRadius:b.Tokens.radii.full,backgroundColor:e?"transparent":b.Tokens.colors.neutral.darker,borderWidth:e?0:1,borderColor:e?"transparent":b.Tokens.colors.neutral.borderSubtle},timerOverlay:{position:"absolute",alignItems:"center",justifyContent:"center"},phaseIndicator:N({position:"absolute",top:-1,left:-1,right:-1,bottom:-1,borderRadius:b.Tokens.radii.full,borderWidth:2,opacity:1},c.Platform.select({web:{transition:b.Tokens.motion.transitions.slow}})),phaseIndicatorFocus:{borderColor:b.Tokens.colors.error.main,backgroundColor:"transparent"},phaseIndicatorBreak:{borderColor:b.Tokens.colors.success.main,backgroundColor:"transparent"},timer:{fontFamily:b.Tokens.type.fontFamily.mono,fontSize:b.Tokens.type.giga,fontWeight:"700",color:e?"#EEF2FF":b.Tokens.colors.text.primary,fontVariant:["tabular-nums"],textAlign:"center",letterSpacing:-2},phaseText:N({fontFamily:b.Tokens.type.fontFamily.sans,fontSize:b.Tokens.type.xl,fontWeight:"600",marginTop:b.Tokens.spacing[2],textTransform:"uppercase",letterSpacing:2},c.Platform.select({web:{transition:b.Tokens.motion.transitions.base}})),phaseTextFocus:{color:e?"#EF4444":b.Tokens.colors.error.main},phaseTextBreak:{color:e?"#22C55E":b.Tokens.colors.success.main},controls:{width:"100%",maxWidth:320,gap:b.Tokens.spacing[4],marginTop:b.Tokens.spacing[8]},controlBtn:{width:"100%",borderRadius:e?8:0}})}(e);return u.default.createElement(y.CosmicBackground,{variant:"nebula",style:c.StyleSheet.absoluteFill,__self:g,__source:{fileName:T,lineNumber:123,columnNumber:5}},u.default.createElement(c.SafeAreaView,{style:I.container,__self:g,__source:{fileName:T,lineNumber:124,columnNumber:7}},u.default.createElement(c.View,{style:I.content,__self:g,__source:{fileName:T,lineNumber:125,columnNumber:9}},u.default.createElement(c.View,{style:I.header,__self:g,__source:{fileName:T,lineNumber:126,columnNumber:11}},u.default.createElement(c.Text,{style:I.title,__self:g,__source:{fileName:T,lineNumber:127,columnNumber:13}},"POMODORO"),u.default.createElement(c.Text,{style:I.subtitle,__self:g,__source:{fileName:T,lineNumber:128,columnNumber:13}},n?"FOCUS BLOCK":"RECOVERY BREAK")),u.default.createElement(c.View,{style:I.rationaleCard,__self:g,__source:{fileName:T,lineNumber:133,columnNumber:11}},u.default.createElement(c.Text,{style:I.rationaleTitle,__self:g,__source:{fileName:T,lineNumber:134,columnNumber:13}},"WHY THIS WORKS"),u.default.createElement(c.Text,{style:I.rationaleText,__self:g,__source:{fileName:T,lineNumber:135,columnNumber:13}},"Structured work/break cycles align with ADHD dopamine regulation. Short bursts (25 min) prevent hyperfocus burnout, while mandatory breaks restore attention. Evidence-based from CBT time-management protocols for sustained task persistence.")),u.default.createElement(c.View,{style:I.timerCard,__self:g,__source:{fileName:T,lineNumber:140,columnNumber:11}},e?u.default.createElement(u.default.Fragment,null,u.default.createElement(y.HaloRing,{mode:"progress",progress:1-w/(n?h:300),size:280,glow:O?"strong":"medium",color:n?"#EF4444":"#22C55E",__self:g,__source:{fileName:T,lineNumber:143,columnNumber:17}}),u.default.createElement(c.View,{style:I.timerOverlay,__self:g,__source:{fileName:T,lineNumber:150,columnNumber:17}},u.default.createElement(y.ChronoDigits,{value:B,size:"hero",glow:O?"strong":"none",color:n?"#EEF2FF":"#22C55E",__self:g,__source:{fileName:T,lineNumber:151,columnNumber:19}}),u.default.createElement(c.Text,{testID:"pomodoro-phase",style:[I.phaseText,n?I.phaseTextFocus:I.phaseTextBreak],__self:g,__source:{fileName:T,lineNumber:157,columnNumber:19}},n?"ðŸ”¥ FOCUS":"ðŸŒ¿ REST"))):u.default.createElement(u.default.Fragment,null,u.default.createElement(c.View,{style:[I.phaseIndicator,n?I.phaseIndicatorFocus:I.phaseIndicatorBreak],__self:g,__source:{fileName:T,lineNumber:167,columnNumber:17}}),u.default.createElement(c.Text,{testID:"timer-display",style:I.timer,__self:g,__source:{fileName:T,lineNumber:168,columnNumber:17}},B),u.default.createElement(c.Text,{testID:"pomodoro-phase",style:[I.phaseText,n?I.phaseTextFocus:I.phaseTextBreak],__self:g,__source:{fileName:T,lineNumber:171,columnNumber:17}},n?"ðŸ”¥ FOCUS":"ðŸŒ¿ REST"))),u.default.createElement(c.View,{style:I.sessionCounter,__self:g,__source:{fileName:T,lineNumber:178,columnNumber:11}},u.default.createElement(c.View,{style:I.sessionBadge,__self:g,__source:{fileName:T,lineNumber:179,columnNumber:13}},u.default.createElement(c.Text,{style:I.sessionCount,__self:g,__source:{fileName:T,lineNumber:180,columnNumber:15}},E)),u.default.createElement(c.Text,{style:I.sessionLabel,__self:g,__source:{fileName:T,lineNumber:182,columnNumber:13}},"COMPLETED SESSIONS")),u.default.createElement(c.View,{style:I.controls,__self:g,__source:{fileName:T,lineNumber:185,columnNumber:11}},O?e?u.default.createElement(y.RuneButton,{variant:"secondary",size:"lg",onPress:D,style:I.controlBtn,__self:g,__source:{fileName:T,lineNumber:208,columnNumber:17}},"Pause"):u.default.createElement(p.LinearButton,{title:"Pause",onPress:D,variant:"secondary",size:"lg",style:I.controlBtn,__self:g,__source:{fileName:T,lineNumber:217,columnNumber:17}}):e?u.default.createElement(y.RuneButton,{variant:"primary",size:"lg",glow:"medium",onPress:j,style:I.controlBtn,__self:g,__source:{fileName:T,lineNumber:188,columnNumber:17}},"Start Timer"):u.default.createElement(p.LinearButton,{title:"Start Timer",onPress:j,variant:n?"primary":"secondary",size:"lg",style:I.controlBtn,__self:g,__source:{fileName:T,lineNumber:198,columnNumber:17}}),e?u.default.createElement(y.RuneButton,{variant:"ghost",size:"md",onPress:z,style:I.controlBtn,__self:g,__source:{fileName:T,lineNumber:227,columnNumber:15}},"Reset"):u.default.createElement(p.LinearButton,{title:"Reset",onPress:z,variant:"ghost",size:"md",__self:g,__source:{fileName:T,lineNumber:236,columnNumber:15}})))))}}}]);